import{_ as a,c as s,o as t,ag as o}from"./chunks/framework.Ds6Eueu6.js";const h=JSON.parse('{"title":"ALTER RESOURCE QUEUE","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/ref_guide/sql_commands/ALTER_RESOURCE_QUEUE.md","filePath":"docs/7x/ref_guide/sql_commands/ALTER_RESOURCE_QUEUE.md"}'),i={name:"docs/7x/ref_guide/sql_commands/ALTER_RESOURCE_QUEUE.md"};function n(r,e,l,u,c,p){return t(),s("div",null,e[0]||(e[0]=[o(`<h1 id="alter-resource-queue" tabindex="-1">ALTER RESOURCE QUEUE <a class="header-anchor" href="#alter-resource-queue" aria-label="Permalink to &quot;ALTER RESOURCE QUEUE&quot;">​</a></h1><p>Changes the limits of a resource queue.</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER RESOURCE QUEUE &lt;name&gt; WITH ( &lt;queue_attribute&gt;=&lt;value&gt; [, ... ] )</span></span></code></pre></div><p>where queue_attribute is:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>   ACTIVE_STATEMENTS=&lt;integer&gt;</span></span>
<span class="line"><span>   MEMORY_LIMIT=&#39;&lt;memory_units&gt;&#39;</span></span>
<span class="line"><span>   MAX_COST=&lt;float&gt;</span></span>
<span class="line"><span>   COST_OVERCOMMIT={TRUE|FALSE}</span></span>
<span class="line"><span>   MIN_COST=&lt;float&gt;</span></span>
<span class="line"><span>   PRIORITY={MIN|LOW|MEDIUM|HIGH|MAX}</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER RESOURCE QUEUE &lt;name&gt; WITHOUT ( &lt;queue_attribute&gt; [, ... ] )</span></span></code></pre></div><p>where queue_attribute is:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>   ACTIVE_STATEMENTS</span></span>
<span class="line"><span>   MEMORY_LIMIT</span></span>
<span class="line"><span>   MAX_COST</span></span>
<span class="line"><span>   COST_OVERCOMMIT</span></span>
<span class="line"><span>   MIN_COST</span></span></code></pre></div><blockquote><p><strong>Note</strong> A resource queue must have either an <code>ACTIVE_STATEMENTS</code> or a <code>MAX_COST</code> value. Do not remove both these <code>queue_attributes</code> from a resource queue.</p></blockquote><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p><code>ALTER RESOURCE QUEUE</code> changes the limits of a resource queue. Only a superuser can alter a resource queue. A resource queue must have either an <code>ACTIVE_STATEMENTS</code> or a <code>MAX_COST</code> value (or it can have both). You can also set or reset priority for a resource queue to control the relative share of available CPU resources used by queries associated with the queue, or memory limit of a resource queue to control the amount of memory that all queries submitted through the queue can consume on a segment host.</p><p><code>ALTER RESOURCE QUEUE WITHOUT</code> removes the specified limits on a resource that were previously set. A resource queue must have either an <code>ACTIVE_STATEMENTS</code> or a <code>MAX_COST</code> value. Do not remove both these <code>queue_attributes</code> from a resource queue.</p><h2 id="parameters" tabindex="-1"><a id="section4"></a>Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Parameters&quot;">​</a></h2><p>name : The name of the resource queue whose limits are to be altered.</p><p>ACTIVE_STATEMENTS integer : The number of active statements submitted from users in this resource queue allowed on the system at any one time. The value for <code>ACTIVE_STATEMENTS</code> should be an integer greater than 0. To reset <code>ACTIVE_STATEMENTS</code> to have no limit, enter a value of <code>-1</code>.</p><p>MEMORY_LIMIT &#39;memory_units&#39; : Sets the total memory quota for all statements submitted from users in this resource queue. Memory units can be specified in kB, MB or GB. The minimum memory quota for a resource queue is 10MB. There is no maximum; however the upper boundary at query execution time is limited by the physical memory of a segment host. The default value is no limit (<code>-1</code>).</p><p>MAX_COST float : The total query optimizer cost of statements submitted from users in this resource queue allowed on the system at any one time. The value for <code>MAX_COST</code> is specified as a floating point number (for example 100.0) or can also be specified as an exponent (for example 1e+2). To reset <code>MAX_COST</code> to have no limit, enter a value of <code>-1.0</code>.</p><p>COST_OVERCOMMIT boolean : If a resource queue is limited based on query cost, then the administrator can allow cost overcommit (<code>COST_OVERCOMMIT=TRUE</code>, the default). This means that a query that exceeds the allowed cost threshold will be allowed to run but only when the system is idle. If <code>COST_OVERCOMMIT=FALSE</code> is specified, queries that exceed the cost limit will always be rejected and never allowed to run.</p><p>MIN_COST float : Queries with a cost under this limit will not be queued and run immediately. Cost is measured in units of disk page fetches; 1.0 equals one sequential disk page read. The value for <code>MIN_COST</code> is specified as a floating point number (for example 100.0) or can also be specified as an exponent (for example 1e+2). To reset <code>MIN_COST</code> to have no limit, enter a value of <code>-1.0</code>.</p><p>PRIORITY={MIN|LOW|MEDIUM|HIGH|MAX} : Sets the priority of queries associated with a resource queue. Queries or statements in queues with higher priority levels will receive a larger share of available CPU resources in case of contention. Queries in low-priority queues may be delayed while higher priority queries are run.</p><h2 id="notes" tabindex="-1"><a id="section5"></a>Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Notes&quot;">​</a></h2><p>GPORCA and the Postgres-based planner utilize different query costing models and may compute different costs for the same query. The WarehousePG resource queue resource management scheme neither differentiates nor aligns costs between GPORCA and the Postgres-based planner; it uses the literal cost value returned from the optimizer to throttle queries.</p><p>When resource queue-based resource management is active, use the <code>MEMORY_LIMIT</code> and <code>ACTIVE_STATEMENTS</code> limits for resource queues rather than configuring cost-based limits. Even when using GPORCA, WarehousePG may fall back to using the Postgres-based planner for certain queries, so using cost-based limits can lead to unexpected results.</p><h2 id="examples" tabindex="-1"><a id="section6"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>Change the active query limit for a resource queue:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER RESOURCE QUEUE myqueue WITH (ACTIVE_STATEMENTS=20);</span></span></code></pre></div><p>Change the memory limit for a resource queue:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER RESOURCE QUEUE myqueue WITH (MEMORY_LIMIT=&#39;2GB&#39;);</span></span></code></pre></div><p>Reset the maximum and minimum query cost limit for a resource queue to no limit:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER RESOURCE QUEUE myqueue WITH (MAX_COST=-1.0, </span></span>
<span class="line"><span>  MIN_COST= -1.0);</span></span></code></pre></div><p>Reset the query cost limit for a resource queue to 310 (or 30000000000.0) and do not allow overcommit:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER RESOURCE QUEUE myqueue WITH (MAX_COST=3e+10, </span></span>
<span class="line"><span>  COST_OVERCOMMIT=FALSE);</span></span></code></pre></div><p>Reset the priority of queries associated with a resource queue to the minimum level:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER RESOURCE QUEUE myqueue WITH (PRIORITY=MIN);</span></span></code></pre></div><p>Remove the <code>MAX_COST</code> and <code>MEMORY_LIMIT</code> limits from a resource queue:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER RESOURCE QUEUE myqueue WITHOUT (MAX_COST, MEMORY_LIMIT);</span></span></code></pre></div><h2 id="compatibility" tabindex="-1"><a id="section7"></a>Compatibility <a class="header-anchor" href="#compatibility" aria-label="Permalink to &quot;&lt;a id=&quot;section7&quot;&gt;&lt;/a&gt;Compatibility&quot;">​</a></h2><p>The <code>ALTER RESOURCE QUEUE</code> statement is a WarehousePG extension. This command does not exist in standard PostgreSQL.</p><h2 id="see-also" tabindex="-1"><a id="section8"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section8&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./CREATE_RESOURCE_QUEUE.html">CREATE RESOURCE QUEUE</a>, <a href="./DROP_RESOURCE_QUEUE.html">DROP RESOURCE QUEUE</a>, <a href="./CREATE_ROLE.html">CREATE ROLE</a>, <a href="./ALTER_ROLE.html">ALTER ROLE</a></p><p><strong>Parent topic:</strong> <a href="./../sql_commands/sql_ref.html">SQL Commands</a></p>`,42)]))}const m=a(i,[["render",n]]);export{h as __pageData,m as default};

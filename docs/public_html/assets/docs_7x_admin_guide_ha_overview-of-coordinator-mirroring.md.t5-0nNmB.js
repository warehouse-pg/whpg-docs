import{_ as e}from"./chunks/standby_coordinator.D0zdgToC.js";import{_ as r,c as a,o as t,ag as i}from"./chunks/framework.Ds6Eueu6.js";const u=JSON.parse('{"title":"Overview of Coordinator Mirroring","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/admin_guide/ha/overview-of-coordinator-mirroring.md","filePath":"docs/7x/admin_guide/ha/overview-of-coordinator-mirroring.md"}'),n={name:"docs/7x/admin_guide/ha/overview-of-coordinator-mirroring.md"};function s(c,o,d,h,l,p){return t(),a("div",null,o[0]||(o[0]=[i('<h1 id="overview-of-coordinator-mirroring" tabindex="-1">Overview of Coordinator Mirroring <a class="header-anchor" href="#overview-of-coordinator-mirroring" aria-label="Permalink to &quot;Overview of Coordinator Mirroring&quot;">â€‹</a></h1><hr><p>You can deploy a backup or mirror of the coordinator instance on a separate host machine. The backup coordinator instance, called the <em>standby coordinator</em>, serves as a warm standby if the primary coordinator becomes nonoperational. You create a standby coordinator from the primary coordinator while the primary is online.</p><p>When you enable coordinator mirroring for an existing system, the primary coordinator continues to provide service to users while a snapshot of the primary coordinator instance is taken. While the snapshot is taken and deployed on the standby coordinator, changes to the primary coordinator are also recorded. After the snapshot has been deployed on the standby coordinator, the standby coordinator is synchronized and kept current using Write-Ahead Logging (WAL)-based streaming replication. WarehousePG WAL replication uses the <code>walsender</code> and <code>walreceiver</code> replication processes. The <code>walsender</code> process is a primary coordinator process. The <code>walreceiver</code> is a standby coordinator process.</p><p><img src="'+e+'" alt="Coordinator Mirroring in WarehousePG" title="Coordinator Mirroring in WarehousePG"></p><p>Since the coordinator does not house user data, only system catalog tables are synchronized between the primary and standby coordinators. When these tables are updated, the replication logs that capture the changes are streamed to the standby coordinator to keep it current with the primary. During WAL replication, all database modifications are written to replication logs before being applied, to ensure data integrity for any in-process operations.</p><p>This is how WarehousePG handles a coordinator failure.</p><ul><li>If the primary coordinator fails, the WarehousePG cluster shuts down and the coordinator replication process stops. The administrator runs the <code>gpactivatestandby</code> utility to have the standby coordinator take over as the new primary coordinator. Upon activation of the standby coordinator, the replicated logs reconstruct the state of the primary coordinator at the time of the last successfully committed transaction. The activated standby coordinator then functions as the WarehousePG coordinator, accepting connections on the port specified when standby coordinator was initialized. See <a href="./recovering-a-failed-coordinator.html">Recovering a Failed Coordinator</a>.</li><li>If the standby coordinator fails or becomes inaccessible while the primary coordinator is active, the primary coordinator tracks database changes in logs that are applied to the standby coordinator when it is recovered.</li></ul><p>These WarehousePG cluster catalog tables contain mirroring and replication information.</p><ul><li>The catalog table <a href="./../../ref_guide/system_catalogs/gp_segment_configuration.html">gp_segment_configuration</a> contains the current configuration and state of primary and mirror segment instances and the coordinator and standby coordinator instance.</li><li>The catalog view <a href="./../../ref_guide/system_catalogs/catalog_ref-views.html#gp_stat_replication">gp_stat_replication</a> contains replication statistics of the <code>walsender</code> processes that are used for WarehousePG coordinator and segment mirroring.</li></ul><p><strong>Parent topic:</strong> <a href="./../ha/overview-of-high-availability-in-warehousepg.html">Overview of WarehousePG High Availability</a></p>',11)]))}const f=r(n,[["render",s]]);export{u as __pageData,f as default};

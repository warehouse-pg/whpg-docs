import{_ as a,c as t,o as s,ag as n}from"./chunks/framework.Ds6Eueu6.js";const m=JSON.parse('{"title":"ALTER INDEX","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/ref_guide/sql_commands/ALTER_INDEX.md","filePath":"docs/7x/ref_guide/sql_commands/ALTER_INDEX.md"}'),i={name:"docs/7x/ref_guide/sql_commands/ALTER_INDEX.md"};function o(l,e,d,r,p,c){return s(),t("div",null,e[0]||(e[0]=[n(`<h1 id="alter-index" tabindex="-1">ALTER INDEX <a class="header-anchor" href="#alter-index" aria-label="Permalink to &quot;ALTER INDEX&quot;">​</a></h1><p>Changes the definition of an index.</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER INDEX [ IF EXISTS ] &lt;name&gt; RENAME TO &lt;new_name&gt;</span></span>
<span class="line"><span>ALTER INDEX [ IF EXISTS ] &lt;name&gt; SET TABLESPACE &lt;tablespace_name&gt;</span></span>
<span class="line"><span>ALTER INDEX &lt;name&gt; ATTACH PARTITION &lt;index_name&gt;</span></span>
<span class="line"><span>ALTER INDEX &lt;name DEPENDS ON EXTENSION &lt;extension_name&gt;</span></span>
<span class="line"><span>ALTER INDEX [ IF EXISTS ] &lt;name&gt; SET ( &lt;storage_parameter&gt; [= &lt;value&gt;] [, ...] )</span></span>
<span class="line"><span>ALTER INDEX [ IF EXISTS ] &lt;name&gt; RESET ( &lt;storage_parameter&gt;  [, ...] )</span></span>
<span class="line"><span>ALTER INDEX [ IF EXISTS ] &lt;name&gt; ALTER [ COLUMN ] &lt;column_number&gt;</span></span>
<span class="line"><span>    SET STATISTICS &lt;integer&gt;</span></span>
<span class="line"><span>ALTER INDEX ALL IN TABLESPACE &lt;name&gt; [ OWNED BY &lt;role_name&gt; [, ... ] ]</span></span>
<span class="line"><span>    SET TABLESPACE &lt;new_tablespace&gt; [ NOWAIT ]</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p><code>ALTER INDEX</code> changes the definition of an existing index. There are several subforms described below. Note that the lock level required may differ for each subform. An <code>ACCESS EXCLUSIVE</code> lock is held unless explicitly noted. When multiple subcommands are listed, the lock held will be the strictest one required from any subcommand.</p><p><strong>RENAME</strong> : Changes the name of the index. If the index is associated with a table constraint (either <code>UNIQUE</code>, <code>PRIMARY KEY</code>, or <code>EXCLUDE</code>), the constraint is renamed as well. There is no effect on the stored data. : Renaming an index acquires a <code>SHARE UPDATE EXCLUSIVE</code> lock.</p><p><strong>SET TABLESPACE</strong> : Changes the index&#39;s tablespace to the specified tablespace and moves the data file(s) associated with the index to the new tablespace. To change the tablespace of an index, you must own the index and have <code>CREATE</code> privilege on the new tablespace. All indexes in the current database in a tablespace can be moved by using the <code>ALL IN TABLESPACE</code> form, which will lock all indexes to be moved and then move each one. This form also supports <code>OWNED BY</code>, which will only move indexes owned by the roles specified. If the <code>NOWAIT</code> option is specified then the command will fail if it is unable to acquire all of the locks required immediately. Note that system catalogs will not be moved by this command, use <code>ALTER DATABASE</code> or explicit <code>ALTER INDEX</code> invocations instead if desired. See also <a href="./CREATE_TABLESPACE.html">CREATE TABLESPACE</a>.</p><p><strong>ATTACH PARTITION</strong> : Causes the named index to become attached to the altered index. The named index must be on a partition of the table containing the index being altered, and have an equivalent definition. An attached index cannot be dropped by itself, and will automatically be dropped if its parent index is dropped.</p><p><strong>DEPENDS ON EXTENSION</strong> : This form marks the index as dependent on the extension, such that if the extension is dropped, the index will automatically be dropped as well.</p><p><strong>SET ( storage_parameter [= value] [, ... ] )</strong> : Changes one or more index-method-specific storage parameters for the index. See <a href="./CREATE_INDEX.html">CREATE INDEX</a> for details on the available parameters. Note that the index contents will not be modified immediately by this command; depending on the parameter you might need to rebuild the index with <a href="./REINDEX.html">REINDEX</a> to get the desired effects.</p><p><strong>RESET ( storage_parameter [, ... ] )</strong> : Resets one or more index-method-specific storage parameters for the index to their defaults. As with <code>SET</code>, a <code>REINDEX</code> may be needed to update the index entirely.</p><p><strong>ALTER [ COLUMN ] column_number SET STATISTICS integer</strong> : This form sets the per-column statistics-gathering target for subsequent <code>ANALYZE</code> operations, though can be used only on index columns that are defined as an expression. Since expressions lack a unique name, we refer to them using the ordinal number of the index column. The target can be set in the range 0 to 10000; alternatively, set it to <code>-1</code> to revert to using the system default statistics target (<a href="./../config_params/guc-list.html#default_statistics_target">default_statistics_target</a>).</p><h2 id="parameters" tabindex="-1"><a id="section4"></a>Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Parameters&quot;">​</a></h2><p>IF EXISTS : Do not throw an error if the index does not exist. WarehousePG issues a notice in this case.</p><p>column_number : The ordinal number refers to the ordinal (left-to-right) position of the index column.</p><p>name : The name (optionally schema-qualified) of an existing index to alter.</p><p>new_name : New name for the index.</p><p>tablespace_name : The tablespace to which the index will be moved.</p><p>storage_parameter : The name of an index-method-specific storage parameter.</p><p>value : The new value for an index-method-specific storage parameter. This might be a number or a word depending on the parameter.</p><h2 id="notes" tabindex="-1"><a id="section5"></a>Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Notes&quot;">​</a></h2><p>These operations are also possible using <a href="./ALTER_TABLE.html">ALTER TABLE</a>. <code>ALTER INDEX</code> is in fact just an alias for the forms of <code>ALTER TABLE</code> that apply to indexes.</p><p>There was formerly an <code>ALTER INDEX OWNER</code> variant, but this is now ignored (with a warning). An index cannot have an owner different from its table&#39;s owner. Changing the table&#39;s owner automatically changes the index as well.</p><p>Changing any part of a system catalog index is not permitted.</p><h2 id="examples" tabindex="-1"><a id="section6"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>To rename an existing index:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER INDEX distributors RENAME TO suppliers;</span></span></code></pre></div><p>To move an index to a different tablespace:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER INDEX distributors SET TABLESPACE fasttablespace;</span></span></code></pre></div><p>To change an index&#39;s fill factor (assuming that the index method supports it):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER INDEX distributors SET (fillfactor = 75);</span></span>
<span class="line"><span>REINDEX INDEX distributors;</span></span></code></pre></div><p>Set the statistics-gathering target for an expression index:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CREATE INDEX coord_idx ON measured (x, y, (z + t));</span></span>
<span class="line"><span>ALTER INDEX coord_idx ALTER COLUMN 3 SET STATISTICS 1000;</span></span></code></pre></div><h2 id="compatibility" tabindex="-1"><a id="section7"></a>Compatibility <a class="header-anchor" href="#compatibility" aria-label="Permalink to &quot;&lt;a id=&quot;section7&quot;&gt;&lt;/a&gt;Compatibility&quot;">​</a></h2><p><code>ALTER INDEX</code> is a WarehousePG extension to the SQL standard.</p><h2 id="see-also" tabindex="-1"><a id="section8"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section8&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./CREATE_INDEX.html">CREATE INDEX</a>, <a href="./REINDEX.html">REINDEX</a>, <a href="./ALTER_TABLE.html">ALTER TABLE</a></p><p><strong>Parent topic:</strong> <a href="./../sql_commands/sql_ref.html">SQL Commands</a></p>`,39)]))}const E=a(i,[["render",o]]);export{m as __pageData,E as default};

import{_ as a,c as t,o as n,ag as s}from"./chunks/framework.Ds6Eueu6.js";const m=JSON.parse('{"title":"ALTER FOREIGN TABLE","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/ref_guide/sql_commands/ALTER_FOREIGN_TABLE.md","filePath":"docs/7x/ref_guide/sql_commands/ALTER_FOREIGN_TABLE.md"}'),o={name:"docs/7x/ref_guide/sql_commands/ALTER_FOREIGN_TABLE.md"};function i(l,e,r,p,c,d){return n(),t("div",null,e[0]||(e[0]=[s(`<h1 id="alter-foreign-table" tabindex="-1">ALTER FOREIGN TABLE <a class="header-anchor" href="#alter-foreign-table" aria-label="Permalink to &quot;ALTER FOREIGN TABLE&quot;">​</a></h1><p>Changes the definition of a foreign table.</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER FOREIGN TABLE [ IF EXISTS ] [ONLY] &lt;name&gt; [ * ]</span></span>
<span class="line"><span>    &lt;action&gt; [, ... ]</span></span>
<span class="line"><span>ALTER FOREIGN TABLE [ IF EXISTS ] [ONLY] &lt;name&gt; [ * ]</span></span>
<span class="line"><span>    RENAME [ COLUMN ] &lt;column_name&gt; TO &lt;new_column_name&gt;</span></span>
<span class="line"><span>ALTER FOREIGN TABLE [ IF EXISTS ] &lt;name&gt;</span></span>
<span class="line"><span>    RENAME TO &lt;new_name&gt;</span></span>
<span class="line"><span>ALTER FOREIGN TABLE [ IF EXISTS ] &lt;name&gt;</span></span>
<span class="line"><span>    SET SCHEMA &lt;new_schema&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>where &lt;action&gt; is one of:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    ADD [ COLUMN ] &lt;column_name&gt; &lt;data_type&gt; [ COLLATE &lt;collation&gt; ] [ &lt;column_constraint&gt; [ ... ] ]</span></span>
<span class="line"><span>    DROP [ COLUMN ] [ IF EXISTS ] &lt;column_name&gt; [ RESTRICT | CASCADE ]</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; [ SET DATA ] TYPE &lt;data_type&gt; [ COLLATE &lt;collation&gt; ]</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; SET DEFAULT &lt;expression&gt;</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; DROP DEFAULT</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; { SET | DROP } NOT NULL</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; SET STATISTICS &lt;integer&gt;</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; SET ( &lt;attribute_option&gt; = &lt;value&gt; [, ... ] )</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; RESET ( &lt;attribute_option&gt; [, ... ] )</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN }</span></span>
<span class="line"><span>    ALTER [ COLUMN ] &lt;column_name&gt; OPTIONS ( [ ADD | SET | DROP ] &lt;option&gt; [&#39;&lt;value&gt;&#39;] [, ... ])</span></span>
<span class="line"><span>    ADD &lt;table_constraint&gt; [ NOT VALID ]</span></span>
<span class="line"><span>    VALIDATE CONSTRAINT &lt;constraint_name&gt;</span></span>
<span class="line"><span>    DROP CONSTRAINT [ IF EXISTS ]  &lt;constraint_name&gt; [ RESTRICT | CASCADE ]</span></span>
<span class="line"><span>    DISABLE TRIGGER [ &lt;trigger_name&gt; | ALL | USER ]</span></span>
<span class="line"><span>    ENABLE TRIGGER [ &lt;trigger_name&gt; | ALL | USER ]</span></span>
<span class="line"><span>    ENABLE REPLICA TRIGGER &lt;trigger_name&gt;</span></span>
<span class="line"><span>    ENABLE ALWAYS TRIGGER &lt;trigger_name&gt;</span></span>
<span class="line"><span>    SET WITHOUT OIDS</span></span>
<span class="line"><span>    INHERIT &lt;parent_table&gt;</span></span>
<span class="line"><span>    NO INHERIT &lt;parent_table&gt;</span></span>
<span class="line"><span>    OWNER TO { &lt;new_owner&gt; | CURRENT_USER | SESSION_USER }</span></span>
<span class="line"><span>    OPTIONS ( [ ADD | SET | DROP ] &lt;option&gt; [&#39;&lt;value&gt;&#39;] [, ... ] )</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p><code>ALTER FOREIGN TABLE</code> changes the definition of an existing foreign table. There are several subforms of the command:</p><p>ADD COLUMN : This form adds a new column to the foreign table, using the same syntax as <a href="./CREATE_FOREIGN_TABLE.html">CREATE FOREIGN TABLE</a>. Unlike the case when you add a column to a regular table, nothing happens to the underlying storage: this action simply declares that some new column is now accessible through the foreign table.</p><p>DROP COLUMN [ IF EXISTS ] : This form drops a column from a foreign table. You must specify <code>CASCADE</code> if any objects outside of the table depend on the column; for example, views. If you specify <code>IF EXISTS</code> and the column does not exist, no error is thrown. In this case, WarehousePG issues a notice instead.</p><p>IF EXISTS : If you specify <code>IF EXISTS</code> and the foreign table does not exist, no error is thrown. WarehousePG issues a notice instead.</p><p>SET DATA TYPE : This form changes the type of a column of a foreign table. Again, this has no effect on any underlying storage: this action simply changes the type that WarehousePG believes the column to have.</p><p>SET/DROP DEFAULT : These forms set or remove the default value for a column. Default values apply only in subsequent <code>INSERT</code> or <code>UPDATE</code> commands; they do not cause rows already in the table to change.</p><p>SET/DROP NOT NULL : Mark a column as allowing, or not allowing, null values.</p><p>SET STATISTICS : This form sets the per-column statistics-gathering target for subsequent <code>ANALYZE</code> operations. See the similar form of <a href="./ALTER_TABLE.html">ALTER TABLE</a> for more details.</p><p>SET ( attribute_option = value [, ...] ] ) RESET ( attribute_option [, ... ] ) : This form sets or resets per-attribute options. See the similar form of <a href="./ALTER_TABLE.html">ALTER TABLE</a> for more details.</p><p>SET STORAGE : This form sets the storage mode for a column. See the similar form of <a href="./ALTER_TABLE.html">ALTER TABLE</a> for more details. Note that the storage mode has no effect unless the table&#39;s foreign-data wrapper chooses to pay attention to it.</p><p>ADD table_constraint [ NOT VALID ] : This form adds a new constraint to a foreign table, using the same syntax as <a href="./CREATE_FOREIGN_TABLE.html">CREATE FOREIGN TABLE</a>. Currently only <code>CHECK</code> constraints are supported. : Unlike the case when adding a constraint to a regular table, nothing is done to verify the constraint is correct; rather, this action simply declares that some new condition should be assumed to hold for all rows in the foreign table. (See the discussion in <a href="./CREATE_FOREIGN_TABLE.html">CREATE FOREIGN TABLE</a>.) If the constraint is marked <code>NOT VALID</code>, then it isn&#39;t assumed to hold, but is only recorded for possible future use.</p><p>VALIDATE CONSTRAINT : This form marks as valid a constraint that was previously marked as <code>NOT VALID</code>. No action is taken to verify the constraint, but future queries will assume that it holds.</p><p>DROP CONSTRAINT [ IF EXISTS ] : This form drops the specified constraint on a foreign table. If <code>IF EXISTS</code> is specified and the constraint does not exist, no error is thrown. In this case a notice is issued instead.</p><p>DISABLE/ENABLE [ REPLICA | ALWAYS ] TRIGGER : These forms configure the firing of trigger(s) belonging to the foreign table. See the similar form of <a href="./ALTER_TABLE.html">ALTER TABLE</a> for more details.</p><p>SET WITHOUT OIDS : Backward compatibility syntax for removing the oid system column. As oid system columns cannot be added anymore, this never has an effect.</p><p>INHERIT parent_table : This form adds the target foreign table as a new child of the specified parent table. See the similar form of <a href="./ALTER_TABLE.html">ALTER TABLE</a> for more details.</p><p>NO INHERIT parent_table : This form removes the target foreign table from the list of children of the specified parent table.</p><p>OWNER : This form changes the owner of the foreign table to the specified user.</p><p>RENAME : The <code>RENAME</code> forms change the name of a foreign table or the name of an individual column in a foreign table.</p><p>SET SCHEMA : This form moves the foreign table into another schema.</p><p>OPTIONS ( [ ADD | SET | DROP ] option [&#39;value&#39;] [, ... ] ) : Change options for the foreign table. <code>ADD</code>, <code>SET</code>, and <code>DROP</code> specify the action to perform. If no operation is explicitly specified, the default operation is <code>ADD</code>. Option names must be unique (although it&#39;s OK for a table option and a column option to have the same name). WarehousePG also validates names and values using the server&#39;s foreign-data wrapper.</p><p>You can combine all of the actions except <code>RENAME</code> and <code>SET SCHEMA</code> into a list of multiple alterations for WarehousePG to apply in parallel. For example, it is possible to add several columns and/or alter the type of several columns in a single command.</p><p>If the command is written as <code>ALTER FOREIGN TABLE IF EXISTS ...</code> and the foreign table does not exist, no error is thrown. A notice is issued in this case.</p><p>You must own the table to use <code>ALTER FOREIGN TABLE</code>. To change the schema of a foreign table, you must also have <code>CREATE</code> privilege on the new schema. To alter the owner, you must also be a direct or indirect member of the new owning role, and that role must have <code>CREATE</code> privilege on the table&#39;s schema. (These restrictions enforce that altering the owner doesn&#39;t do anything you couldn&#39;t do by dropping and recreating the table. However, a superuser can alter ownership of any table anyway.) To add a column or to alter a column type, you must also have <code>USAGE</code> privilege on the data type.</p><h2 id="parameters" tabindex="-1"><a id="section4"></a>Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Parameters&quot;">​</a></h2><p>name : The name (possibly schema-qualified) of an existing foreign table to alter. If <code>ONLY</code> is specified before the table name, only that table is altered. If <code>ONLY</code> is not specified, the table and all its descendant tables (if any) are altered. Optionally, <code>*</code> can be specified after the table name to explicitly indicate that descendant tables are included.</p><p>column_name : The name of a new or existing column.</p><p>new_column_name : The new name for an existing column.</p><p>new_name : The new name for the foreign table.</p><p>data_type : The data type of the new column, or new data type for an existing column.</p><p>table_constraint : The new table constraint for the foreign table.</p><p>constraint_name : The name of an existing constraint to validate or drop.</p><p>CASCADE : Automatically drop objects that depend on the dropped column or constraint (for example, views referencing the column), and in turn all objects that depend on those objects.</p><p>RESTRICT : Refuse to drop the column or constraint if there are any dependent objects. This is the default behavior.</p><p>trigger_name : Name of a single trigger to deactivate or enable.</p><p>ALL : Deactivate or activate all triggers belonging to the foreign table. (This requires superuser privilege if any of the triggers are internally generated triggers. The core system does not add such triggers to foreign tables, but add-on code could do so.)</p><p>USER : Deactivate or activate all triggers belonging to the foreign table except for internally generated triggers.</p><p>parent_table : A parent table to associate or de-associate with this foreign table.</p><p>new_owner : The user name of the new owner of the foreign table.</p><p>new_schema : The name of the schema to which the foreign table will be moved.</p><h2 id="notes" tabindex="-1"><a id="section5"></a>Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Notes&quot;">​</a></h2><p>The key word <code>COLUMN</code> is noise and can be omitted.</p><p>Consistency with the foreign server is not checked when a column is added or removed with <code>ADD COLUMN</code> or <code>DROP COLUMN</code>, a <code>NOT NULL</code> or <code>CHECK</code> constraint is added, or a column type is changed with <code>SET DATA TYPE</code>. It is your responsibility to ensure that the table definition matches the remote side.</p><p>Refer to <a href="./CREATE_FOREIGN_TABLE.html">CREATE FOREIGN TABLE</a> for a further description of valid parameters.</p><h2 id="examples" tabindex="-1"><a id="section6"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>To mark a column as not-null:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER FOREIGN TABLE distributors ALTER COLUMN street SET NOT NULL;</span></span></code></pre></div><p>To change the options of a foreign table:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER FOREIGN TABLE myschema.distributors </span></span>
<span class="line"><span>    OPTIONS (ADD opt1 &#39;value&#39;, SET opt2 &#39;value2&#39;, DROP opt3 &#39;value3&#39;);</span></span></code></pre></div><h2 id="compatibility" tabindex="-1"><a id="section7"></a>Compatibility <a class="header-anchor" href="#compatibility" aria-label="Permalink to &quot;&lt;a id=&quot;section7&quot;&gt;&lt;/a&gt;Compatibility&quot;">​</a></h2><p>The forms <code>ADD</code>, <code>DROP</code>, and <code>SET DATA TYPE</code> conform with the SQL standard. The other forms are WarehousePG extensions of the SQL standard. The ability to specify more than one manipulation in a single <code>ALTER FOREIGN TABLE</code> command is also a WarehousePG extension.</p><p>You can use <code>ALTER FOREIGN TABLE ... DROP COLUMN</code> to drop the only column of a foreign table, leaving a zero-column table. This is an extension of SQL, which disallows zero-column foreign tables.</p><h2 id="see-also" tabindex="-1"><a id="section8"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section8&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./ALTER_TABLE.html">ALTER TABLE</a>, <a href="./CREATE_FOREIGN_TABLE.html">CREATE FOREIGN TABLE</a>, <a href="./DROP_FOREIGN_TABLE.html">DROP FOREIGN TABLE</a></p><p><strong>Parent topic:</strong> <a href="./../sql_commands/sql_ref.html">SQL Commands</a></p>`,60)]))}const E=a(o,[["render",i]]);export{m as __pageData,E as default};

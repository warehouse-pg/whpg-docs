import{_ as t,c as a,o as e,ag as i}from"./chunks/framework.Ds6Eueu6.js";const g=JSON.parse('{"title":"Recovering a Failed Coordinator","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/admin_guide/ha/recovering-a-failed-coordinator.md","filePath":"docs/7x/admin_guide/ha/recovering-a-failed-coordinator.md"}'),r={name:"docs/7x/admin_guide/ha/recovering-a-failed-coordinator.md"};function n(s,o,d,c,l,p){return e(),a("div",null,o[0]||(o[0]=[i(`<h1 id="recovering-a-failed-coordinator" tabindex="-1">Recovering a Failed Coordinator <a class="header-anchor" href="#recovering-a-failed-coordinator" aria-label="Permalink to &quot;Recovering a Failed Coordinator&quot;">​</a></h1><hr><p>If the primary coordinator fails, the WarehousePG cluster is not accessible and WAL replication stops. Use <a href="./../../utility_guide/ref/gpactivatestandby.html">gpactivatestandby</a> to activate the standby coordinator. Upon activation of the standby coordinator, WarehousePG reconstructs the coordinator host state at the time of the last successfully committed transaction.</p><p>These steps assume a standby coordinator host is configured for the system. See <a href="./enabling-coordinator-mirroring.html">Enabling Coordinator Mirroring</a>.</p><h2 id="to-activate-the-standby-coordinator" tabindex="-1"><a id="ki181117"></a>To activate the standby coordinator <a class="header-anchor" href="#to-activate-the-standby-coordinator" aria-label="Permalink to &quot;&lt;a id=&quot;ki181117&quot;&gt;&lt;/a&gt;To activate the standby coordinator&quot;">​</a></h2><ol><li><p>Run the <code>gpactivatestandby</code> utility from the standby coordinator host you are activating. For example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ export PGPORT=5432</span></span>
<span class="line"><span>$ gpactivatestandby -d /data/coordinator/gpseg-1</span></span></code></pre></div><p>Where <code>-d</code> specifies the data directory of the coordinator host you are activating.</p><p>After you activate the standby, it becomes the <em>active</em> or <em>primary</em> coordinator for your WarehousePG cluster.</p><blockquote><p><strong>NOTE</strong> Before running <code>gpactivatestandby</code>, be sure to run <code>gpstate -f</code> to confirm that the standby coordinator is synchronized with the current coordinator node. If synchronized, the final line of the <code>gpstate -f</code> output will look similar to this: <code>20230607:06:50:06:004205 gpstate:test1-m:gpadmin-[INFO]:--Sync state: sync</code></p></blockquote></li><li><p>After the utility completes, run <code>gpstate</code> with the <code>-b</code> option to display a summary of the system status:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ gpstate -b</span></span></code></pre></div><p>The coordinator instance status should be <code>Active</code>. When a standby coordinator is not configured, the command displays <code>No coordinator standby configured</code> for the standby coordinator status. If you configured a new standby coordinator, its status is <code>Passive</code>.</p></li><li><p>Optional: If you have not already done so while activating the prior standby coordinator, you can run <code>gpinitstandby</code> on the active coordinator host to configure a new standby coordinator.</p><blockquote><p><strong>Important</strong> You must initialize a new standby coordinator to continue providing coordinator mirroring.</p></blockquote><p>For information about restoring the original coordinator and standby coordinator configuration, see <a href="./restoring-coordinator-mirroring-after-a-recovery.html">Restoring Coordinator Mirroring After a Recovery</a>.</p></li></ol><ul><li><strong><a href="./../ha/restoring-coordinator-mirroring-after-a-recovery.html">Restoring Coordinator Mirroring After a Recovery</a></strong></li></ul><p><strong>Parent topic:</strong> <a href="./../ha/enabling-high-availability-features.html">Enabling High Availability and Data Consistency Features</a></p>`,8)]))}const u=t(r,[["render",n]]);export{g as __pageData,u as default};

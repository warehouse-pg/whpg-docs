import{_ as e,c as a,o,ag as s}from"./chunks/framework.Ds6Eueu6.js";const u=JSON.parse('{"title":"gpinitstandby","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/utility_guide/ref/gpinitstandby.md","filePath":"docs/7x/utility_guide/ref/gpinitstandby.md"}'),n={name:"docs/7x/utility_guide/ref/gpinitstandby.md"};function i(r,t,d,c,p,h){return o(),a("div",null,t[0]||(t[0]=[s(`<h1 id="gpinitstandby" tabindex="-1">gpinitstandby <a class="header-anchor" href="#gpinitstandby" aria-label="Permalink to &quot;gpinitstandby&quot;">​</a></h1><p>Adds and/or initializes a standby coordinator host for a WarehousePG cluster.</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpinitstandby { -s &lt;standby_hostname&gt; [-P port] | -r | -n } [-a] [-q] </span></span>
<span class="line"><span>    [-D] [-S &lt;standby_data_directory&gt;] [-l &lt;logfile_directory&gt;] </span></span>
<span class="line"><span>    [--hba-hostnames &lt;boolean&gt;] </span></span>
<span class="line"><span></span></span>
<span class="line"><span>gpinitstandby -v </span></span>
<span class="line"><span></span></span>
<span class="line"><span>gpinitstandby -?</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p>The <code>gpinitstandby</code> utility adds a backup, standby coordinator instance to your WarehousePG cluster. If your system has an existing standby coordinator instance configured, use the <code>-r</code> option to remove it before adding the new standby coordinator instance.</p><p>Before running this utility, make sure that the WarehousePG software is installed on the standby coordinator host and that you have exchanged SSH keys between the hosts. It is recommended that the coordinator port is set to the same port number on the coordinator host and the standby coordinator host.</p><p>This utility should be run on the currently active <em>primary</em> coordinator host. See the <em>WarehousePG Installation Guide</em> for instructions.</p><p>The utility performs the following steps:</p><ul><li>Updates the WarehousePG cluster catalog to remove the existing standby coordinator information (if the <code>-r</code> option is supplied)</li><li>Updates the WarehousePG cluster catalog to add the new standby coordinator instance information</li><li>Edits the <code>pg_hba.conf</code> file of the WarehousePG coordinator to allow access from the newly added standby coordinator</li><li>Sets up the standby coordinator instance on the alternate coordinator host</li><li>Starts the synchronization process</li></ul><p>A backup, standby coordinator instance serves as a &#39;warm standby&#39; in the event of the primary coordinator becoming non-operational. The standby coordinator is kept up to date by transaction log replication processes (the <code>walsender</code> and <code>walreceiver</code>), which run on the primary coordinator and standby coordinator hosts and keep the data between the primary and standby coordinator instances synchronized. If the primary coordinator fails, the log replication process is shut down, and the standby coordinator can be activated in its place by using the <code>gpactivatestandby</code> utility. Upon activation of the standby coordinator, the replicated logs are used to reconstruct the state of the coordinator instance at the time of the last successfully committed transaction.</p><p>The activated standby coordinator effectively becomes the WarehousePG coordinator, accepting client connections on the coordinator port and performing normal coordinator operations such as SQL command processing and resource management.</p><blockquote><p><strong>Important</strong> If the <code>gpinitstandby</code> utility previously failed to initialize the standby coordinator, you must delete the files in the standby coordinator data directory before running <code>gpinitstandby</code> again. The standby coordinator data directory is not cleaned up after an initialization failure because it contains log files that can help in determining the reason for the failure.</p></blockquote><p>If an initialization failure occurs, a summary report file is generated in the standby host directory <code>/tmp</code>. The report file lists the directories on the standby host that require clean up.</p><h2 id="options" tabindex="-1"><a id="section4"></a>Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Options&quot;">​</a></h2><p>-a (do not prompt) : Do not prompt the user for confirmation.</p><p>-D (debug) : Sets logging level to debug.</p><p>--hba-hostnames boolean : Optional. Controls whether this utility uses IP addresses or host names in the <code>pg_hba.conf</code> file when updating this file with addresses that can connect to WarehousePG. When set to 0 -- the default value -- this utility uses IP addresses when updating this file. When set to 1, this utility uses host names when updating this file. For consistency, use the same value that was specified for <code>HBA_HOSTNAMES</code> when the WarehousePG cluster was initialized. For information about how WarehousePG resolves host names in the <code>pg_hba.conf</code> file, see <a href="./../../admin_guide/client_auth.html">Configuring Client Authentication</a>.</p><p>-l logfile_directory : The directory to write the log file. Defaults to <code>~/gpAdminLogs</code>.</p><p>-n (restart standby coordinator) : Specify this option to start a WarehousePG standby coordinator that has been configured but has stopped for some reason.</p><p>-P port : This option specifies the port that is used by the WarehousePG standby coordinator. The default is the same port used by the active WarehousePG coordinator.</p><p>: If the WarehousePG standby coordinator is on the same host as the active coordinator, the ports must be different. If the ports are the same for the active and standby coordinator and the host is the same, the utility returns an error.</p><p>-q (no screen output) : Run in quiet mode. Command output is not displayed on the screen, but is still written to the log file.</p><p>-r (remove standby coordinator) : Removes the currently configured standby coordinator instance from your WarehousePG cluster.</p><p>-s standby_hostname : The host name of the standby coordinator host.</p><p>-S standby_data_directory : The data directory to use for a new standby coordinator. The default is the same directory used by the active coordinator.</p><p>: If the standby coordinator is on the same host as the active coordinator, a different directory must be specified using this option.</p><p>-v (show utility version) : Displays the version, status, last updated date, and checksum of this utility.</p><p>-? (help) : Displays the online help.</p><h2 id="examples" tabindex="-1"><a id="section5"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>Add a standby coordinator instance to your WarehousePG cluster and start the synchronization process:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpinitstandby -s host09</span></span></code></pre></div><p>Start an existing standby coordinator instance and synchronize the data with the current primary coordinator instance:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpinitstandby -n</span></span></code></pre></div><blockquote><p><strong>Note</strong> Do not specify the -n and -s options in the same command.</p></blockquote><p>Add a standby coordinator instance to your WarehousePG cluster specifying a different port:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpinitstandby -s myhost -P 2222</span></span></code></pre></div><p>If you specify the same host name as the active WarehousePG coordinator, you must also specify a different port number with the <code>-P</code> option and a standby data directory with the <code>-S</code> option.</p><p>Remove the existing standby coordinator from your WarehousePG cluster configuration:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpinitstandby -r</span></span></code></pre></div><h2 id="see-also" tabindex="-1"><a id="section6"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./gpinitsystem.html">gpinitsystem</a>, <a href="./gpaddmirrors.html">gpaddmirrors</a>, <a href="./gpactivatestandby.html">gpactivatestandby</a></p>`,42)]))}const y=e(n,[["render",i]]);export{u as __pageData,y as default};

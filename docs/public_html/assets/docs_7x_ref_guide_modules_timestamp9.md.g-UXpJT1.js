import{_ as a,c as n,o as e,ag as t}from"./chunks/framework.Ds6Eueu6.js";const T=JSON.parse('{"title":"timestamp9","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/ref_guide/modules/timestamp9.md","filePath":"docs/7x/ref_guide/modules/timestamp9.md"}'),p={name:"docs/7x/ref_guide/modules/timestamp9.md"};function i(o,s,l,c,d,r){return e(),n("div",null,s[0]||(s[0]=[t(`<h1 id="timestamp9" tabindex="-1">timestamp9 <a class="header-anchor" href="#timestamp9" aria-label="Permalink to &quot;timestamp9&quot;">​</a></h1><p>The <code>timestamp9</code> module provides an efficient, nanosecond-precision timestamp data type and related functions and operators.</p><p>The WarehousePG <code>timestamp9</code> module is based on version 1.2.0 of the <a href="https://github.com/fvannee/timestamp9" target="_blank" rel="noreferrer"><code>timestamp9</code> module</a> used with PostgreSQL.</p><h2 id="installing-and-registering-the-module" tabindex="-1"><a id="topic_reg"></a>Installing and Registering the Module <a class="header-anchor" href="#installing-and-registering-the-module" aria-label="Permalink to &quot;&lt;a id=&quot;topic_reg&quot;&gt;&lt;/a&gt;Installing and Registering the Module&quot;">​</a></h2><p>The <code>timestamp9</code> module is installed when you install WarehousePG. Before you can use the data type defined in the module, you must register the <code>timestamp9</code> extension in each database in which you want to use the type:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CREATE EXTENSION timestamp9;</span></span></code></pre></div><p>Refer to <a href="./../../install_guide/install_extensions.html">Installing Extensions</a> for more information.</p><h2 id="supported-data-types" tabindex="-1">Supported Data Types <a class="header-anchor" href="#supported-data-types" aria-label="Permalink to &quot;Supported Data Types&quot;">​</a></h2><p>The WarehousePG <code>timestamp9</code> extension supports three kinds of datatatypes: <code>TIMESTAMP9</code>, <code>TIMESTAMP9_LTZ</code> and <code>TIMESTAMP9_NTZ</code>. (The <code>TIMESTAMP9_LTZ</code> data type is an alias for <code>TIMESTAMP9</code> data type.)</p><p>The following table summarizes key information about the <code>timestamp9</code> data types:</p><p>|Data Type|Storage Size|Description|Max Value|Min Value|Resolution| |--------|-------|----|-----------|---------|---------|----------| |<code>TIMESTAMP9</code>|8 bytes|Like TIMESTAMP9_LTZ. Timestamp with local time zone. |2261-12-31 23:59:59.999999999 +0000 |1700-01-01 00:00:00.000000000 +0000 | 1 nanosecond | |<code>TIMESTAMP9_LTZ</code>|8 bytes|Timestamp with local time zone. |2261-12-31 23:59:59.999999999 +0000 |1700-01-01 00:00:00.000000000 +0000 | 1 nanosecond | |<code>TIMESTAMP9_NTZ</code>|8 bytes|Timestamp without time zone. |2261-12-31 23:59:59.999999999 +0000 |1700-01-01 00:00:00.000000000 +0000 | 1 nanosecond|</p><h3 id="more-about-timestamp9" tabindex="-1">More about <code>TIMESTAMP9</code> <a class="header-anchor" href="#more-about-timestamp9" aria-label="Permalink to &quot;More about \`TIMESTAMP9\`&quot;">​</a></h3><p>The <code>TIMESTAMP9</code> data type is identical to the <code>TIMESTAMP9_LTZ</code> data type. Please see the next section for details.</p><h3 id="more-about-timestamp9-ltz" tabindex="-1">More about <code>TIMESTAMP9_LTZ</code> <a class="header-anchor" href="#more-about-timestamp9-ltz" aria-label="Permalink to &quot;More about \`TIMESTAMP9_LTZ\`&quot;">​</a></h3><p><code>LTZ</code> is an abbreviation for &quot;Local Time Zone.&quot; WarehousePG stores <code>TIMESTAMP9_LTZ</code> internally in UTC (Universal Coordinated Time, traditionally known as Greenwich Mean Time or GMT) time. An input value that has an explicit time zone specified is converted to UTC using the appropriate offset for that time zone.</p><p>If no time zone is specified in the input string, then it is presumed to be in the time zone indicated by the system&#39;s <code>TIMEZONE</code> server configuration parameter and is converted to UTC using the offset for the time zone.</p><p>See <a href="#timestamp9_ltz-examples">TIMESTAMP9_LTZ Examples</a> for examples using this data type.</p><h3 id="more-about-tiimestamp9-ntz" tabindex="-1">More about <code>TIIMESTAMP9_NTZ</code> <a class="header-anchor" href="#more-about-tiimestamp9-ntz" aria-label="Permalink to &quot;More about \`TIIMESTAMP9_NTZ\`&quot;">​</a></h3><p><code>NTZ</code> is an abbreviation of ‘No Time Zone.’ WarehousePG stores UTC time internally without considering any time zone information. If a time zone is embedded in the timestamp string, WarehousePG will simply ignore it.</p><p>See <a href="#timestamp9_ntz-examples">TIMESTAMP9_NTZ Examples</a> for examples using this data type.</p><h2 id="supported-type-conversions" tabindex="-1">Supported Type Conversions <a class="header-anchor" href="#supported-type-conversions" aria-label="Permalink to &quot;Supported Type Conversions&quot;">​</a></h2><p>The following table summarizes the <code>timestamp9</code> module&#39;s supported type conversions.</p><table tabindex="0"><thead><tr><th>From</th><th>To</th><th>Description</th></tr></thead><tbody><tr><td><code>BIGINT</code></td><td><code>TIMESTAMP9_LTZ</code></td><td>WarehousePG treats the <code>BIGINT</code> value as the number of nanoseconds started from ‘1970-01-01 00:00:00 +0000’.</td></tr><tr><td><code>DATE</code></td><td><code>TIMESTAMP9_LTZ</code></td><td>WarehousePG treats the <code>DATE</code> value as in the current session time zone. This behavior is identical to converting from from <code>DATE</code> to <code>TIMESTAMPTZ</code>.</td></tr><tr><td><code>TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP</code></td><td><code>TIMESTAMP9_LTZ</code></td><td>WarehousePG treats the <code>TIMESTAMP</code> value as in the current session time zone. This behavior is identical to converting from <code>TIMESTAMP</code> to <code>TIMESTAMPTZ</code>.</td></tr><tr><td><code>TIMESTAMP WITH TIME ZONE/TIMESTAMPTZ</code></td><td><code>TIMESTAMP9_LTZ</code></td><td>For this conversion, WarehousePG only extends the fractional part to nanosecond precision.</td></tr><tr><td><code>TIMESTAMP9_LTZ</code></td><td><code>BIGINT</code></td><td>The result of this conversion is the nanoseconds since ‘1970-01-01 00:00:00.000000000 +0000’ to the given <code>TIMESTAMP9_LTZ</code> value. If the given <code>TIMESTAMP9_LTZ</code> value is before ‘1970-01-01 00:00:00.000000000 +0000’, the result is negative.</td></tr><tr><td><code>TIMESTAMP9_LTZ</code></td><td><code>DATE</code></td><td>The result of this conversion depends on the date of the given <code>TIMESTAMP9_LTZ</code> value in the time zone of the current session. The behavior is like doing conversion from <code>TIMESTAMPTZ</code> to <code>DATE</code>.</td></tr><tr><td><code>TIMESTAMP9_LTZ</code></td><td><code>TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP</code></td><td>The result of this conversion is a timestamp without time zone. The resulting timestamp’s value is determined by the value of <code>TIMESTAMP9_LTZ</code> in the current session time zone. Note that the fractional part of <code>TIMESTAMP</code> type has 6 digits, while <code>TIMESTAMP9_LTZ</code> has 9 digits in its fractional part. When converting <code>TIMESTAMP9_LTZ</code> to <code>TIMESTAMP</code>, the fractional part is truncated instead of being rounded off.</td></tr><tr><td><code>TIMESTAMP9_LTZ</code></td><td><code>TIMESTAMP WITH TIME ZONE/TIMESTAMP</code></td><td>When performing this conversion, WarehousePG truncates the fractional part to only 6 digits.</td></tr><tr><td><code>BIGINT</code></td><td><code>TIMESTAMP9_NTZ</code></td><td>When performing this conversion, WarehousePG treats the BIGINT value as the number of nanoseconds started from ‘1970-01-01 00:00:00’.</td></tr><tr><td><code>DATE</code></td><td><code>TIMESTAMP9_NTZ</code></td><td>When performing this conversion, the resulting timestamp is ‘00:00:00.000000000’ on the given date.</td></tr><tr><td><code>TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP</code></td><td><code>TIMESTAMP9_NTZ</code></td><td>When peforming this conversion, WarehousePG only extends the fractional part to nanosecond precision.</td></tr><tr><td><code>TIMESTAMP WITH TIME ZONE/TIMESTAMP</code></td><td><code>TIMESTAMP9_NTZ</code></td><td>The resulting timestamp’s value is determined by the value of <code>TIMESTAMPTZ</code> in the current session time zone.</td></tr><tr><td><code>TIMESTAMP9_NTZ</code></td><td><code>BIGINT</code></td><td>The result of this conversion is the nanoseconds since ‘1970-01-01 00:00:00.000000000’ to the given <code>TIMESTAMP9_NTZ</code> value. If the given <code>TIMESTAMP9_NTZ</code> value is before ‘1970-01-01 00:00:00.000000000’, the result is negative.</td></tr><tr><td><code>TIMESTAMP9_NTZ</code></td><td><code>DATE</code></td><td>When performing this conversion, WarehousePG truncatest the time portion and preserves the date portion.</td></tr><tr><td><code>TIMESTAMP9_NTZ</code></td><td><code>TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP</code></td><td>When performing this conversion, WarehousePG truncates only the fractional part to 6 digits.</td></tr><tr><td><code>TIMESTAMP9_NTZ</code></td><td><code>TIMESTAMP WITH TIME ZONE/TIMESTAMP</code></td><td>When performing this conversion, WarehousePG only truncates the fractional part to 6 digits and add the time zone of the current session.</td></tr><tr><td><code>TIMESTAMP9_LTZ</code></td><td><code>TIMESTAMP9_NTZ</code></td><td>The resulting <code>TIMESTAMP9_NTZ</code> value is determined by the value of <code>TIMESTAMP9_LTZ</code> in the current session&#39;s time zone.</td></tr><tr><td><code>TIMESTAMP9_NTZ</code></td><td><code>TIMESTAMP9_LTZ</code></td><td>When performing this conversion, WarehousePG adds the timezone of the current sesion.</td></tr></tbody></table><h3 id="type-conversion-examples" tabindex="-1">Type Conversion Examples <a class="header-anchor" href="#type-conversion-examples" aria-label="Permalink to &quot;Type Conversion Examples&quot;">​</a></h3><h4 id="convert-bigint-to-timestamp9-ltz" tabindex="-1"><a id="conversion_1"></a>Convert <code>BIGINT</code> to <code>TIMESTAMP9_LTZ</code> <a class="header-anchor" href="#convert-bigint-to-timestamp9-ltz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_1&quot;&gt;&lt;/a&gt;Convert \`BIGINT\` to \`TIMESTAMP9_LTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SHOW TIMEZONE; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>   TimeZone </span></span>
<span class="line"><span>-------------- </span></span>
<span class="line"><span>Asia/Shanghai </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span>	</span></span>
<span class="line"><span>=# SELECT 0::BIGINT::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span>------------------------------------ </span></span>
<span class="line"><span>1970-01-01 08:00:00.000000000 +0800 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-date-to-timestamp9-ltz" tabindex="-1"><a id="conversion_2"></a>Convert <code>DATE</code> to <code>TIMESTAMP9_LTZ</code> <a class="header-anchor" href="#convert-date-to-timestamp9-ltz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_2&quot;&gt;&lt;/a&gt;Convert \`DATE\` to \`TIMESTAMP9_LTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SHOW TIMEZONE; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>   TimeZone </span></span>
<span class="line"><span>-------------- </span></span>
<span class="line"><span>Asia/Shanghai </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span> =# SELECT &#39;2023-01-01&#39;::DATE::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span>------------------------------------- </span></span>
<span class="line"><span>2023-01-01 00:00:00.000000000 +0800 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01&#39;::DATE::TIMESTAMPTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>      timestamptz </span></span>
<span class="line"><span>------------------------ </span></span>
<span class="line"><span>2023-01-01 00:00:00+08 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp-without-time-zone-timestamp-to-timestamp9-ltz" tabindex="-1"><a id="conversion_3"></a>Convert <code>TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP</code> to <code>TIMESTAMP9_LTZ</code> <a class="header-anchor" href="#convert-timestamp-without-time-zone-timestamp-to-timestamp9-ltz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_3&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP\` to \`TIMESTAMP9_LTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SHOW TIMEZONE; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>   TimeZone </span></span>
<span class="line"><span>--------------- </span></span>
<span class="line"><span>Asia/Shanghai </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>Time: 0.411 ms </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00&#39;::TIMESTAMP::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span>------------------------------------- </span></span>
<span class="line"><span>2023-01-01 00:00:00.000000000 +0800 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>Time: 0.691 ms </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00&#39;::TIMESTAMP::TIMESTAMPTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>      timestamptz </span></span>
<span class="line"><span>------------------------ </span></span>
<span class="line"><span>2023-01-01 00:00:00+08 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp-with-time-zone-timestamp-to-timestamp9-ltz" tabindex="-1"><a id="conversion_4"></a>Convert <code>TIMESTAMP WITH TIME ZONE/TIMESTAMP</code> to <code>TIMESTAMP9_LTZ</code> <a class="header-anchor" href="#convert-timestamp-with-time-zone-timestamp-to-timestamp9-ltz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_4&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP WITH TIME ZONE/TIMESTAMP\` to \`TIMESTAMP9_LTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00.123456&#39;::TIMESTAMPTZ::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span>------------------------------------- </span></span>
<span class="line"><span>2023-01-01 00:00:00.123456000 +0800 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ltz-to-bigint" tabindex="-1"><a id="conversion_5"></a>Convert <code>TIMESTAMP9_LTZ</code> to <code>BIGINT</code> <a class="header-anchor" href="#convert-timestamp9-ltz-to-bigint" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_5&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_LTZ\` to \`BIGINT\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00.123456 Asia/Shanghai&#39;::TIMESTAMP9_LTZ::BIGINT; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>        int8 </span></span>
<span class="line"><span>--------------------- </span></span>
<span class="line"><span>1672502400123456000 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>=# SELECT &#39;1969-01-01 00:00:00.123456 Asia/Shanghai&#39;::TIMESTAMP9_LTZ::BIGINT; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>        int8 </span></span>
<span class="line"><span>-------------------- </span></span>
<span class="line"><span>-31564799876544000 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ltz-to-date" tabindex="-1"><a id="conversion_6"></a>Convert <code>TIMESTAMP9_LTZ</code> to <code>DATE</code> <a class="header-anchor" href="#convert-timestamp9-ltz-to-date" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_6&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_LTZ\` to \`DATE\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SET TIMEZONE TO &#39;Asia/Shanghai&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-02 02:59:59 Asia/Shanghai&#39;::TIMESTAMPTZ::DATE; </span></span>
<span class="line"><span>    date </span></span>
<span class="line"><span>------------ </span></span>
<span class="line"><span>2023-01-02 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>=# SET TIMEZONE TO &#39;UTC+0&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-02 02:59:59 Asia/Shanghai&#39;::TIMESTAMPTZ::DATE; </span></span>
<span class="line"><span>    date </span></span>
<span class="line"><span>------------ </span></span>
<span class="line"><span>2023-01-01 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ltz-to-timestamp-without-time-zone-timestamp" tabindex="-1"><a id="conversion_7"></a>Convert <code>TIMESTAMP9_LTZ</code> to <code>TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP</code> <a class="header-anchor" href="#convert-timestamp9-ltz-to-timestamp-without-time-zone-timestamp" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_7&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_LTZ\` to \`TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP\`&quot;">​</a></h4><p><strong>Example 1</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SET TIMEZONE TO &#39;Asia/Shanghai&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-02 02:59:59 Asia/Shanghai&#39;::TIMESTAMP9_LTZ::TIMESTAMP; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>      timestamp </span></span>
<span class="line"><span>--------------------- </span></span>
<span class="line"><span>2023-01-02 02:59:59 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>=# SET TIMEZONE TO &#39;UTC+0&#39;; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-02 02:59:59 Asia/Shanghai&#39;::TIMESTAMP9_LTZ::TIMESTAMP; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>      timestamp </span></span>
<span class="line"><span>--------------------- </span></span>
<span class="line"><span>2023-01-01 18:59:59 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><p><strong>Example 2 -- Truncation of the fractional part</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SET TIMEZONE TO &#39;Asia/Shanghai&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-02 02:59:59.123456789 Asia/Shanghai&#39;::TIMESTAMP9_LTZ::TIMESTAMP; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>         timestamp </span></span>
<span class="line"><span>---------------------------- </span></span>
<span class="line"><span>2023-01-02 02:59:59.123456 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ltz-to-timestamp-with-time-zone-timestamp" tabindex="-1"><a id="conversion_8"></a>Convert <code>TIMESTAMP9_LTZ</code> to <code>TIMESTAMP WITH TIME ZONE/TIMESTAMP</code> <a class="header-anchor" href="#convert-timestamp9-ltz-to-timestamp-with-time-zone-timestamp" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_8&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_LTZ\` to \`TIMESTAMP WITH TIME ZONE/TIMESTAMP\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SET TIMEZONE TO &#39;Asia/Shanghai&#39;; </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-02 02:59:59.123456789 Asia/Shanghai&#39;::TIMESTAMP9_LTZ::TIMESTAMPTZ; </span></span>
<span class="line"><span>          timestamptz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span>2023-01-02 02:59:59.123456+08 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-bigint-to-timestamp9-ntz" tabindex="-1"><a id="conversion_9"></a>Convert <code>BIGINT</code> to <code>TIMESTAMP9_NTZ</code> <a class="header-anchor" href="#convert-bigint-to-timestamp9-ntz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_9&quot;&gt;&lt;/a&gt;Convert \`BIGINT\` to \`TIMESTAMP9_NTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT 0::BIGINT::TIMESTAMP9_NTZ; </span></span>
<span class="line"><span>        timestamp9_ntz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span></span></span>
<span class="line"><span>1970-01-01 00:00:00.000000000 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-date-to-timestamp9-ntz" tabindex="-1"><a id="conversion_10"></a>Convert <code>DATE</code> to <code>TIMESTAMP9_NTZ</code> <a class="header-anchor" href="#convert-date-to-timestamp9-ntz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_10&quot;&gt;&lt;/a&gt;Convert \`DATE\` to \`TIMESTAMP9_NTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT &#39;2023-01-01&#39;::DATE::TIMESTAMP9_NTZ; </span></span>
<span class="line"><span>        timestamp9_ntz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span>2023-01-01 00:00:00.000000000 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp-without-time-zone-timestamp-to-timestamp9-ntz" tabindex="-1"><a id="conversion_11"></a>Convert <code>TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP</code> to <code>TIMESTAMP9_NTZ</code> <a class="header-anchor" href="#convert-timestamp-without-time-zone-timestamp-to-timestamp9-ntz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_11&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP\` to \`TIMESTAMP9_NTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00.123456&#39;::TIMESTAMP::TIMESTAMP9_NTZ; </span></span>
<span class="line"><span>        timestamp9_ntz </span></span>
<span class="line"><span></span></span>
<span class="line"><span>------------------------------ </span></span>
<span class="line"><span>2023-01-01 00:00:00.123456000 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp-with-time-zone-timestamp-to-timestamp9-ntz" tabindex="-1"><a id="conversion_12"></a>Convert <code>TIMESTAMP WITH TIME ZONE/TIMESTAMP</code> to <code>TIMESTAMP9_NTZ</code> <a class="header-anchor" href="#convert-timestamp-with-time-zone-timestamp-to-timestamp9-ntz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_12&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP WITH TIME ZONE/TIMESTAMP\` to \`TIMESTAMP9_NTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SET TIMEZONE TO &#39;Asia/Shanghai&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00.123456 Asia/Shanghai&#39;::TIMESTAMPTZ::TIMESTAMP9_NTZ; </span></span>
<span class="line"><span>        timestamp9_ntz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span>2023-01-01 00:00:00.123456000 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>=# SET TIMEZONE TO &#39;UTC+0&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00.123456 Asia/Shanghai&#39;::TIMESTAMPTZ::TIMESTAMP9_NTZ; </span></span>
<span class="line"><span>        timestamp9_ntz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span>2022-12-31 16:00:00.123456000 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ntz-to-bigint" tabindex="-1"><a id="conversion_13"></a>Convert <code>TIMESTAMP9_NTZ</code> to <code>BIGINT</code> <a class="header-anchor" href="#convert-timestamp9-ntz-to-bigint" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_13&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_NTZ\` to \`BIGINT\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00.123456&#39;::TIMESTAMP9_NTZ::BIGINT; </span></span>
<span class="line"><span>        int8 </span></span>
<span class="line"><span>--------------------- </span></span>
<span class="line"><span>1672531200123456000 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>=# SELECT &#39;1969-01-01 00:00:00.123456&#39;::TIMESTAMP9_NTZ::BIGINT; </span></span>
<span class="line"><span>        int8 </span></span>
<span class="line"><span>-------------------- </span></span>
<span class="line"><span>-31535999876544000 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ntz-to-date" tabindex="-1"><a id="conversion_14"></a>Convert <code>TIMESTAMP9_NTZ</code> to <code>DATE</code> <a class="header-anchor" href="#convert-timestamp9-ntz-to-date" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_14&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_NTZ\` to \`DATE\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00.123456&#39;::TIMESTAMP9_NTZ::DATE; </span></span>
<span class="line"><span>    date </span></span>
<span class="line"><span>------------ </span></span>
<span class="line"><span>2023-01-01 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ntz-to-timestamp-without-time-zone-timestamp" tabindex="-1"><a id="conversion_15"></a>Convert <code>TIMESTAMP9_NTZ</code> to <code>TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP</code> <a class="header-anchor" href="#convert-timestamp9-ntz-to-timestamp-without-time-zone-timestamp" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_15&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_NTZ\` to \`TIMESTAMP WITHOUT TIME ZONE/TIMESTAMP\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT &#39;2023-01-01 00:00:00.123456789&#39;::TIMESTAMP9_NTZ::TIMESTAMP; </span></span>
<span class="line"><span>         timestamp </span></span>
<span class="line"><span>---------------------------- </span></span>
<span class="line"><span>2023-01-01 00:00:00.123456 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ntz-to-timestamp-with-time-zone-timestamp" tabindex="-1"><a id="conversion_16"></a>Convert <code>TIMESTAMP9_NTZ</code> to <code>TIMESTAMP WITH TIME ZONE/TIMESTAMP</code> <a class="header-anchor" href="#convert-timestamp9-ntz-to-timestamp-with-time-zone-timestamp" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_16&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_NTZ\` to \`TIMESTAMP WITH TIME ZONE/TIMESTAMP\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SET TIMEZONE TO &#39;Asia/Shanghai&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 23:00:00.123456789&#39;::TIMESTAMP9_NTZ::TIMESTAMPTZ; </span></span>
<span class="line"><span>          timestamptz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span>2023-01-01 23:00:00.123456+08 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>Time: 0.793 ms </span></span>
<span class="line"><span>=# SET TIMEZONE TO &#39;UTC+0&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 23:00:00.123456789&#39;::TIMESTAMP9_NTZ::TIMESTAMPTZ; </span></span>
<span class="line"><span>          timestamptz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span>2023-01-01 23:00:00.123456+00 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ltz-to-timestamp9-ntz" tabindex="-1"><a id="conversion_17"></a>Convert <code>TIMESTAMP9_LTZ</code> to <code>TIMESTAMP9_NTZ</code> <a class="header-anchor" href="#convert-timestamp9-ltz-to-timestamp9-ntz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_17&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_LTZ\` to \`TIMESTAMP9_NTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SET TIMEZONE TO &#39;Asia/Shanghai&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 23:00:00.123456789 Asia/Shanghai&#39;::TIMESTAMP9_LTZ::TIMESTAMP9_NTZ; </span></span>
<span class="line"><span>        timestamp9_ntz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span>2023-01-01 23:00:00.123456789 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>=# SET TIMEZONE TO &#39;UTC+0&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 23:00:00.123456789 Asia/Shanghai&#39;::TIMESTAMP9_LTZ::TIMESTAMP9_NTZ; </span></span>
<span class="line"><span>        timestamp9_ntz </span></span>
<span class="line"><span>------------------------------- </span></span>
<span class="line"><span>2023-01-01 15:00:00.123456789 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h4 id="convert-timestamp9-ntz-to-timestamp9-ltz" tabindex="-1"><a id="conversion_18"></a>Convert <code>TIMESTAMP9_NTZ</code> to <code>TIMESTAMP9_LTZ</code> <a class="header-anchor" href="#convert-timestamp9-ntz-to-timestamp9-ltz" aria-label="Permalink to &quot;&lt;a id=&quot;conversion_18&quot;&gt;&lt;/a&gt;Convert \`TIMESTAMP9_NTZ\` to \`TIMESTAMP9_LTZ\`&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SET TIMEZONE TO &#39;Asia/Shanghai&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 23:00:00.123456789&#39;::TIMESTAMP9_NTZ::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span>------------------------------------- </span></span>
<span class="line"><span>2023-01-01 23:00:00.123456789 +0800 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>=# SET TIMEZONE TO &#39;UTC+0&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>=# SELECT &#39;2023-01-01 23:00:00.123456789&#39;::TIMESTAMP9_NTZ::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span>------------------------------------- </span></span>
<span class="line"><span>2023-01-01 23:00:00.123456789 +0000 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h2 id="the-timezone-configuration-parameter-and-timestamp9" tabindex="-1"><a id="topic_gp"></a>The TimeZone Configuration Parameter and <code>timestamp9</code> <a class="header-anchor" href="#the-timezone-configuration-parameter-and-timestamp9" aria-label="Permalink to &quot;&lt;a id=&quot;topic_gp&quot;&gt;&lt;/a&gt;The TimeZone Configuration Parameter and \`timestamp9\`&quot;">​</a></h2><p>You can set the <a href="./../config_params/guc-list.html#TimeZone">TimeZone</a> server configuration parameter to specify the time zone that WarehousePG uses when it prints a <code>timestamp9</code> timestamp. When you set this parameter, WarehousePG displays the timestamp value in that time zone. For example:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">testdb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()::timestamp9;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                 now</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2022</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">08</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">24</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">08</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">729360000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0800</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">testdb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timezone </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;UTC+2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">testdb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()::timestamp9;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                 now</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2022</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">08</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">24</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 08</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">08</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">995542000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="support-for-date-time-functions" tabindex="-1"><a id="topic_gucs"></a>Support For Date/Time Functions <a class="header-anchor" href="#support-for-date-time-functions" aria-label="Permalink to &quot;&lt;a id=&quot;topic_gucs&quot;&gt;&lt;/a&gt;Support For Date/Time Functions&quot;">​</a></h2><p>The <code>timestamp9</code> module defines two server configuration parameters that you set to enable date/time functions defined in the <code>pg_catalog</code> schema on <code>timestamp</code> types. Visit the <a href="https://www.postgresql.org/docs/12/functions-datetime.html#:~:text=Table%C2%A09.31.%C2%A0Date/Time%20Functions" target="_blank" rel="noreferrer">PostgreSQL Documentation</a> for a list of the supported date/time functions. The parameters are:</p><ul><li><code>timestamp9.enable_implicit_cast_timestamp9_ltz_to_timestamptz</code>: when enabled, casting a <code>timestamp9_ltz</code> value to <code>timestamp with time zone</code> becomes implicit.</li><li><code>timestamp9.enable_implicit_cast_timestamp9_ntz_to_timestamp</code>: when enabled, casting a <code>timestamp9_ntz</code> value to <code>timestamp without time zone</code> becomes implicit.</li></ul><p>The default value for both configuration parameters is <code>off</code>. For example, if you try use the <code>date</code> function with <code>timestamp9</code> and <code>timestamp9.enable_implicit_cast_timestamp9_ltz_to_timestamptz</code> is set to <code>off</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# SELECT date(&#39;2022-01-01&#39;::timestamp9_ltz); </span></span>
<span class="line"><span>ERROR:  implicitly cast timestamp9_ltz to timestamptz is not allowed </span></span>
<span class="line"><span>HINT:  either set &#39;timestamp9.enable_implicit_cast_timestamp9_ltz_to_timestamptz&#39; to &#39;on&#39; or do it explicitly</span></span></code></pre></div><p>Enable the configuration parameter in order to use the <code>date</code> function:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# SET timestamp9.enable_implicit_cast_timestamp9_ltz_to_timestamptz TO &#39;ON&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>postgres=# SELECT date(&#39;2022-01-01&#39;::timestamp9_ltz); </span></span>
<span class="line"><span>    date </span></span>
<span class="line"><span>------------ </span></span>
<span class="line"><span> 01-01-2022 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><p>Note that enabling these configuration parameters will also result in multiple casting paths from <code>timestamp9</code> types and built-in <code>timestamp</code> types. You may encounter error messages such as:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# select &#39;2019-09-19&#39;::timestamp9_ltz &lt;= &#39;2019-09-20&#39;::timestamptz; </span></span>
<span class="line"><span>ERROR:  operator is not unique: timestamp9_ltz &lt;= timestamp with time zone </span></span>
<span class="line"><span>LINE 1: select &#39;2019-09-19&#39;::timestamp9_ltz &lt;= &#39;2019-09-20&#39;::timesta... </span></span>
<span class="line"><span>HINT:  Could not choose a best candidate operator. You might need to add explicit type casts.</span></span></code></pre></div><p>In this situation, cast the type explicitly:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# select &#39;2019-09-19&#39;::timestamp9_ntz &lt;= &#39;2019-09-20&#39;::timestamptz::timestamp9_ntz; </span></span>
<span class="line"><span>?column? </span></span>
<span class="line"><span>---------- </span></span>
<span class="line"><span> t </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><p>Alternatively, cast the <code>timestamp9_ntz</code> value to the <code>timestamptz</code> value:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# select &#39;2019-09-19&#39;::timestamp9_ntz::timestamptz &lt;= &#39;2019-09-20&#39;::timestamptz; </span></span>
<span class="line"><span>?column? </span></span>
<span class="line"><span>---------- </span></span>
<span class="line"><span> t </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h2 id="support-for-date-time-functions-1" tabindex="-1"><a id="topic_gucs"></a>Support For Date/Time Functions <a class="header-anchor" href="#support-for-date-time-functions-1" aria-label="Permalink to &quot;&lt;a id=&quot;topic_gucs&quot;&gt;&lt;/a&gt;Support For Date/Time Functions&quot;">​</a></h2><p>The <code>timestamp9</code> module defines two server configuration parameters that you set to enable date/time functions defined in the <code>pg_catalog</code> schema on <code>timestamp</code> types. Visit the <a href="https://www.postgresql.org/docs/12/functions-datetime.html#:~:text=Table%C2%A09.31.%C2%A0Date/Time%20Functions" target="_blank" rel="noreferrer">PostgreSQL Documentation</a> for a list of the supported date/time functions. The parameters are:</p><ul><li><code>timestamp9.enable_implicit_cast_timestamp9_ltz_to_timestamptz</code>: when enabled, casting a <code>timestamp9_ltz</code> value to <code>timestamp with time zone</code> becomes implicit.</li><li><code>timestamp9.enable_implicit_cast_timestamp9_ntz_to_timestamp</code>: when enabled, casting a <code>timestamp9_ntz</code> value to <code>timestamp without time zone</code> becomes implicit.</li></ul><p>The default value for both configuration parameters is <code>off</code>. For example, if you try use the <code>date</code> function with <code>timestamp9</code> and <code>timestamp9.enable_implicit_cast_timestamp9_ltz_to_timestamptz</code> is set to <code>off</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# SELECT date(&#39;2022-01-01&#39;::timestamp9_ltz); </span></span>
<span class="line"><span>ERROR:  implicitly cast timestamp9_ltz to timestamptz is not allowed </span></span>
<span class="line"><span>HINT:  either set &#39;timestamp9.enable_implicit_cast_timestamp9_ltz_to_timestamptz&#39; to &#39;on&#39; or do it explicitly</span></span></code></pre></div><p>Enable the configuration parameter in order to use the <code>date</code> function:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# SET timestamp9.enable_implicit_cast_timestamp9_ltz_to_timestamptz TO &#39;ON&#39;; </span></span>
<span class="line"><span>SET </span></span>
<span class="line"><span>postgres=# SELECT date(&#39;2022-01-01&#39;::timestamp9_ltz); </span></span>
<span class="line"><span>    date </span></span>
<span class="line"><span>------------ </span></span>
<span class="line"><span> 01-01-2022 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><p>Note that enabling these configuration parameters will also result in multiple casting paths from <code>timestamp9</code> types and built-in <code>timestamp</code> types. You may encounter error messages such as:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# select &#39;2019-09-19&#39;::timestamp9_ltz &lt;= &#39;2019-09-20&#39;::timestamptz; </span></span>
<span class="line"><span>ERROR:  operator is not unique: timestamp9_ltz &lt;= timestamp with time zone </span></span>
<span class="line"><span>LINE 1: select &#39;2019-09-19&#39;::timestamp9_ltz &lt;= &#39;2019-09-20&#39;::timesta... </span></span>
<span class="line"><span>HINT:  Could not choose a best candidate operator. You might need to add explicit type casts.</span></span></code></pre></div><p>In this situation, cast the type explicitly:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# select &#39;2019-09-19&#39;::timestamp9_ntz &lt;= &#39;2019-09-20&#39;::timestamptz::timestamp9_ntz; </span></span>
<span class="line"><span>?column? </span></span>
<span class="line"><span>---------- </span></span>
<span class="line"><span> t </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><p>Alternatively, cast the <code>timestamp9_ntz</code> value to the <code>timestamptz</code> value:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgres=# select &#39;2019-09-19&#39;::timestamp9_ntz::timestamptz &lt;= &#39;2019-09-20&#39;::timestamptz; </span></span>
<span class="line"><span>?column? </span></span>
<span class="line"><span>---------- </span></span>
<span class="line"><span> t </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h2 id="examples" tabindex="-1"><a id="examples"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;examples&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><h3 id="timestamp9-ltz-examples" tabindex="-1"><code>TIMESTAMP9_LTZ</code> Examples <a class="header-anchor" href="#timestamp9-ltz-examples" aria-label="Permalink to &quot;\`TIMESTAMP9_LTZ\` Examples&quot;">​</a></h3><h4 id="valid-input-for-timestamp9-ltz" tabindex="-1">Valid input for <code>TIMESTAMP9_LTZ</code> <a class="header-anchor" href="#valid-input-for-timestamp9-ltz" aria-label="Permalink to &quot;Valid input for \`TIMESTAMP9_LTZ\`&quot;">​</a></h4><p>Valid input for the <code>TIMESTAMP9_LTZ</code> consists of the concatenation of a date and a time, followed by an optional time zone. Users can specify the fractional part of second up to 9 digits (in nanosecond precision).</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>The current system’s TIMEZONE parameter is ‘Asia/Shanghai’ </span></span>
<span class="line"><span></span></span>
<span class="line"><span>SELECT &#39;2023-02-20 00:00:00.123456789 +0200&#39;::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span></span></span>
<span class="line"><span>------------------------------------- </span></span>
<span class="line"><span>2023-02-20 06:00:00.123456789 +0800 </span></span>
<span class="line"><span>(1 row) </span></span>
<span class="line"><span></span></span>
<span class="line"><span> If the input string doesn’t have explicit time zone information, the timestamp is presumed to be in the time zone indicated by the system’s TIMEZONE parameter. </span></span>
<span class="line"><span></span></span>
<span class="line"><span>SELECT &#39;2023-02-20 00:00:00.123456789&#39;::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span>------------------------------------- </span></span>
<span class="line"><span>2023-02-20 00:00:00.123456789 +0800 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><p>TIMESTAMP9_LTZ also accepts numbers as valid input. It’s interpreted as the number of nanoseconds since the UTC time ‘1970-01-01 00:00:00.000000000’.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SELECT &#39;123456789&#39;::TIMESTAMP9_LTZ; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>           timestamp9_ltz </span></span>
<span class="line"><span>------------------------------------- </span></span>
<span class="line"><span>1970-01-01 08:00:00.123456789 +0800 </span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h3 id="timestamp9-ntz-examples" tabindex="-1"><code>TIMESTAMP9_NTZ</code> Examples <a class="header-anchor" href="#timestamp9-ntz-examples" aria-label="Permalink to &quot;\`TIMESTAMP9_NTZ\` Examples&quot;">​</a></h3><h4 id="valid-input-for-timestamp9-ntz" tabindex="-1">Valid input for <code>TIMESTAMP9_NTZ</code> <a class="header-anchor" href="#valid-input-for-timestamp9-ntz" aria-label="Permalink to &quot;Valid input for \`TIMESTAMP9_NTZ\`&quot;">​</a></h4><p>As with <code>TIMESTAMP9_LTZ</code>, valid input for the <code>TIMESTAMP9_NTZ</code> data type consists of the concatenation of a date and a time, followed by an optional time zone. Users can specify the fractional part of second up to 9 digits (in nanosecond precision). The difference is that, if the user specifies time zone in the input string, <code>TIMESTAMP9_NTZ</code> will ignore it and store the remaining timestamp as UTC time without applying any time zone offset.</p><p>The current system’s TIMEZONE parameter is ‘Asia/Shanghai’</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=# SELECT &#39;2023-02-20 00:00:00.123456789 +0200&#39;::TIMESTAMP9_NTZ;</span></span>
<span class="line"><span>        timestamp9_ntz</span></span>
<span class="line"><span>-------------------------------</span></span>
<span class="line"><span>2023-02-20 00:00:00.123456789</span></span>
<span class="line"><span>(1 row)</span></span>
<span class="line"><span>=# SELECT &#39;2023-02-20 00:00:00.123456789&#39;::TIMESTAMP9_NTZ;</span></span>
<span class="line"><span>        timestamp9_ntz</span></span>
<span class="line"><span>-------------------------------</span></span>
<span class="line"><span>2023-02-20 00:00:00.123456789</span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><h2 id="limitations" tabindex="-1"><a id="topic_limit"></a>Limitations <a class="header-anchor" href="#limitations" aria-label="Permalink to &quot;&lt;a id=&quot;topic_limit&quot;&gt;&lt;/a&gt;Limitations&quot;">​</a></h2><p>The <code>timestamp9</code> data type does not support arithmetic calculations with nanoseconds.</p>`,106)]))}const m=a(p,[["render",i]]);export{T as __pageData,m as default};

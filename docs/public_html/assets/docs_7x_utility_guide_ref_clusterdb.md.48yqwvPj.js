import{_ as t,c as a,o as s,ag as o}from"./chunks/framework.Ds6Eueu6.js";const u=JSON.parse('{"title":"clusterdb","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/utility_guide/ref/clusterdb.md","filePath":"docs/7x/utility_guide/ref/clusterdb.md"}'),n={name:"docs/7x/utility_guide/ref/clusterdb.md"};function i(r,e,d,c,l,p){return s(),a("div",null,e[0]||(e[0]=[o(`<h1 id="clusterdb" tabindex="-1">clusterdb <a class="header-anchor" href="#clusterdb" aria-label="Permalink to &quot;clusterdb&quot;">​</a></h1><p>Reclusters tables that were previously clustered with <code>CLUSTER</code>.</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>clusterdb [&lt;connection-option&gt; ...] [--verbose | -v] [--table | -t &lt;table&gt;] [[--dbname | -d] &lt;dbname]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>clusterdb [&lt;connection-option&gt; ...] [--verbose | -v] --all | -a</span></span>
<span class="line"><span></span></span>
<span class="line"><span>clusterdb -? | --help</span></span>
<span class="line"><span></span></span>
<span class="line"><span>clusterdb -V | --version</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p>To cluster a table means to physically reorder a table on disk according to an index. Clustering helps improving index seek performance for queries that use that index. Clustering is a one-time operation: when the table is subsequently updated, the changes are not clustered. That is, no attempt is made to store new or updated rows according to their index order.</p><p>The <code>clusterdb</code> utility will find any tables in a database that have previously been clustered with the <code>CLUSTER</code> SQL command, and clusters them again on the same index that was last used. Tables that have never been clustered are not affected.</p><p><code>clusterdb</code> is a wrapper around the SQL command <a href="./../../ref_guide/sql_commands/CLUSTER.html">CLUSTER</a>. There is no effective difference between clustering databases via this utility and via other methods for accessing the server.</p><h2 id="options" tabindex="-1"><a id="section4"></a>Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Options&quot;">​</a></h2><p><code>clusterdb</code> accepts the following command-line arguments:</p><p>-a --all : Cluster all databases.</p><p>[-d] dbname [--dbname=]dbname : Specifies the name of the database to be clustered, when <code>-a/--all</code> is not used. If this is not specified, the database name is read from the environment variable <code>PGDATABASE</code>. If that is not set, the user name specified for the connection is used. The dbname can be a <a href="https://www.postgresql.org/docs/12/libpq-connect.html#LIBPQ-CONNSTRING" target="_blank" rel="noreferrer">connection string</a>. If so, connection string parameters will override any conflicting command line options.</p><p>-e --echo : Echo the commands that <code>clusterdb</code> generates and sends to the server.</p><p>-q --quiet : Do not display progress messages.</p><p>-t table --table=table : Cluster the named table only. You can cluster multiple tables by specifying multiple <code>-t</code> switches.</p><p>-v --verbose : Print detailed information during processing.</p><p>-V --version : Print the <code>clusterdb</code> version, and exit.</p><p>-? --help : Show help about <code>clusterdb</code> command line arguments, and exit.</p><p><strong>Connection Options</strong></p><p><code>clusterdb</code> also accepts the following command-line arguments for connection parameters:</p><p>-h host --host=host : Specifies the host name of the machine on which the WarehousePG coordinator database server is running. If not specified, reads from the environment variable <code>PGHOST</code> or defaults to <code>localhost</code>.</p><p>-p port --port=port : Specifies the TCP port on which the WarehousePG coordinator database server is listening for connections. If not specified, reads from the environment variable <code>PGPORT</code> or defaults to 5432.</p><p>-U username --username=username : The database role name to connect as. If not specified, reads from the environment variable <code>PGUSER</code> or defaults to the current system role name.</p><p>-w --no-password : Never issue a password prompt. If the server requires password authentication and a password is not available by other means such as a <code>.pgpass</code> file, the connection attempt will fail. This option can be useful in batch jobs and scripts where no user is present to enter a password.</p><p>-W --password : Force <code>clusterdb</code> to prompt for a password before connecting to a database. : This option is never essential, since <code>clusterdb</code> will automatically prompt for a password if the server demands password authentication. However, <code>clusterdb</code> will waste a connection attempt finding out that the server wants a password. In some cases it is worth typing <code>-W</code> to avoid the extra connection attempt.</p><p>--maintenance-db=dbname : Specifies the name of the database to connect to discover what other databases should be clustered. If not specified, the <code>postgres</code> database will be used, and if that does not exist, <code>template1</code> will be used. This can be a <a href="https://www.postgresql.org/docs/12/libpq-connect.html#LIBPQ-CONNSTRING" target="_blank" rel="noreferrer">connection</a> string. If so, connection string parameters will override any conflicting command line options. Also, connection string parameters other than the database name itself will be re-used when connecting to other databases.</p><h2 id="environment" tabindex="-1"><a id="section6e"></a>Environment <a class="header-anchor" href="#environment" aria-label="Permalink to &quot;&lt;a id=&quot;section6e&quot;&gt;&lt;/a&gt;Environment&quot;">​</a></h2><p>PGDATABASE PGHOST PGPORT PGUSER : Default connection parameters.</p><p>PG_COLOR : Specifies whether to use color in diagnostic messages. Possible values are <code>always</code>, <code>auto</code>, and <code>never</code>.</p><p>This utility, like most other WarehousePG utilities, also uses the environment variables supported by <code>libpq</code>.</p><h2 id="diagnostics" tabindex="-1"><a id="section6d"></a>Diagnostics <a class="header-anchor" href="#diagnostics" aria-label="Permalink to &quot;&lt;a id=&quot;section6d&quot;&gt;&lt;/a&gt;Diagnostics&quot;">​</a></h2><p>In case of difficulty, see <a href="./../../ref_guide/sql_commands/CLUSTER.html">CLUSTER</a> and <a href="./psql.html">psql</a> for discussions of potential problems and error messages. The database server must be running at the targeted host. Also, any default connection settings and environment variables used by the <code>libpq</code> front-end library will apply.</p><h2 id="examples" tabindex="-1"><a id="section6"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>To cluster the database named <code>test</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>clusterdb test</span></span></code></pre></div><p>To cluster a single table <code>foo</code> in a database named <code>xyzzy</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>clusterdb --table=foo xyzzy</span></span></code></pre></div><h2 id="see-also" tabindex="-1"><a id="section7"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section7&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./../../ref_guide/sql_commands/CLUSTER.html">CLUSTER</a></p>`,39)]))}const b=t(n,[["render",i]]);export{u as __pageData,b as default};

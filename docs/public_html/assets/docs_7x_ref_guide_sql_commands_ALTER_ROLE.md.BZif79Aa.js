import{_ as a,c as s,o as n,ag as t}from"./chunks/framework.Ds6Eueu6.js";const E=JSON.parse('{"title":"ALTER ROLE","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/ref_guide/sql_commands/ALTER_ROLE.md","filePath":"docs/7x/ref_guide/sql_commands/ALTER_ROLE.md"}'),o={name:"docs/7x/ref_guide/sql_commands/ALTER_ROLE.md"};function i(r,e,l,p,c,d){return n(),s("div",null,e[0]||(e[0]=[t(`<h1 id="alter-role" tabindex="-1">ALTER ROLE <a class="header-anchor" href="#alter-role" aria-label="Permalink to &quot;ALTER ROLE&quot;">​</a></h1><p>Changes a database role (user or group).</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE &lt;role_specification&gt; [ WITH ] &lt;option&gt; [ ... ]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>where &lt;option&gt; can be:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    SUPERUSER | NOSUPERUSER</span></span>
<span class="line"><span>  | CREATEDB | NOCREATEDB</span></span>
<span class="line"><span>  | CREATEROLE | NOCREATEROLE</span></span>
<span class="line"><span>  | CREATEEXTTABLE | NOCREATEEXTTABLE  [ ( attribute=&#39;value&#39; [, ...] )</span></span>
<span class="line"><span>     where attributes and values are:</span></span>
<span class="line"><span>       type=&#39;readable&#39;|&#39;writable&#39;</span></span>
<span class="line"><span>       protocol=&#39;gpfdist&#39;|&#39;http&#39;</span></span>
<span class="line"><span>  | INHERIT | NOINHERIT</span></span>
<span class="line"><span>  | LOGIN | NOLOGIN</span></span>
<span class="line"><span>  | REPLICATION | NOREPLICATION</span></span>
<span class="line"><span>  | BYPASSRLS | NOBYPASSRLS</span></span>
<span class="line"><span>  | CONNECTION LIMIT &lt;connlimit&gt;</span></span>
<span class="line"><span>  | [ ENCRYPTED ] PASSWORD &#39;&lt;password&gt;&#39; | PASSWORD NULL</span></span>
<span class="line"><span>  | VALID UNTIL &#39;&lt;timestamp&gt;&#39;</span></span>
<span class="line"><span>  | [ DENY &lt;deny_point&gt; ]</span></span>
<span class="line"><span>  | [ DENY BETWEEN &lt;deny_point&gt; AND &lt;deny_point&gt;]</span></span>
<span class="line"><span>  | [ DROP DENY FOR &lt;deny_point&gt; ]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALTER ROLE &lt;name&gt; RENAME TO &lt;new_name&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALTER ROLE { &lt;role_specification&gt; | ALL } [ IN DATABASE &lt;database_name&gt; ] SET &lt;configuration_parameter&gt; { TO | = } { &lt;value&gt; | DEFAULT }</span></span>
<span class="line"><span>ALTER ROLE { &lt;role_specification&gt; | ALL } [ IN DATABASE &lt;database_name&gt; ] SET &lt;configuration_parameter&gt; FROM CURRENT</span></span>
<span class="line"><span>ALTER ROLE { &lt;role_specification&gt; | ALL } [ IN DATABASE &lt;database_name&gt; ] RESET &lt;configuration_parameter&gt;</span></span>
<span class="line"><span>ALTER ROLE { &lt;role_specification&gt; | ALL } [ IN DATABASE &lt;database_name&gt; ] RESET ALL</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALTER ROLE &lt;role_specification&gt; RESOURCE QUEUE {&lt;queue_name&gt; | NONE}</span></span>
<span class="line"><span>ALTER ROLE &lt;role_specification&gt; RESOURCE GROUP {&lt;group_name&gt; | NONE}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>where &lt;role_specification&gt; can be:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    &lt;role_name&gt;</span></span>
<span class="line"><span>  | CURRENT_USER</span></span>
<span class="line"><span>  | SESSION_USER</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p><code>ALTER ROLE</code> changes the attributes of a WarehousePG role. There are several variants of this command.</p><p><strong>WITH option</strong> : Changes many of the role attributes that can be specified in <a href="./CREATE_ROLE.html">CREATE ROLE</a>. (All of the possible attributes are covered, execept that there are no options for adding or removing memberships; use <a href="./GRANT.html">GRANT</a> and <a href="./REVOKE.html">REVOKE</a> for that.) Attributes not mentioned in the command retain their previous settings. Database superusers can change any of these settings for any role. Roles having <code>CREATEROLE</code> privilege can change any of these settings except <code>SUPERUSER</code>, <code>REPLICATION</code>, and <code>BYPASSRLS</code>, but only for non-superuser and non-replication roles. Ordinary roles can only change their own password.</p><p><strong>RENAME</strong> : Changes the name of the role. Database superusers can rename any role. Roles having <code>CREATEROLE</code> privilege can rename non-superuser roles. The current session user cannot be renamed (connect as a different user to rename a role). Because MD5-encrypted passwords use the role name as cryptographic salt, renaming a role clears its password if the password is MD5-encrypted.</p><p><strong>SET | RESET</strong> : Changes a role&#39;s session default for a specified configuration parameter, either for all databases or, when the <code>IN DATABASE</code> clause is specified, only for sessions in the named database. If <code>ALL</code> is specified instead of a role name, this changes the setting for all roles. Using <code>ALL</code> with <code>IN DATABASE</code> is effectively the same as using the command <code>ALTER DATABASE ... SET ...</code>.</p><pre><code>Whenever the role subsequently starts a new session, the specified value becomes the session default, overriding whatever setting is present in the server configuration file \\(\`postgresql.conf\`\\) or has been received from the \`postgres\` command line. This only happens at login time; running [SET ROLE](SET_ROLE.html) or [SET SESSION AUTHORIZATION](SET_SESSION_AUTHORIZATION.html) does not cause new configuration values to be set. Settings set for all databases are overridden by database-specific settings attached to a role. Settings for specific databases or specific roles override settings for all roles.

Superusers can change anyone&#39;s session defaults. Roles having \`CREATEROLE\` privilege can change defaults for non-superuser roles. Ordinary roles can only set defaults for themselves. Certain configuration variables cannot be set this way, or can only be set if a superuser issues the command. Only superusers can change a setting for all roles in all databases.
</code></pre><p><strong>RESOURCE QUEUE</strong> : Assigns the role to a resource queue. The role would then be subject to the limits assigned to the resource queue when issuing queries. Specify <code>NONE</code> to assign the role to the default resource queue. A role can belong to only one resource queue. For a role without <code>LOGIN</code> privilege, resource queues have no effect. See <a href="./CREATE_RESOURCE_QUEUE.html">CREATE RESOURCE QUEUE</a> for more information.</p><p><strong>RESOURCE GROUP</strong> : Assigns a resource group to the role. The role would then be subject to the concurrent transaction, memory, and CPU limits configured for the resource group. You can assign a single resource group to one or more roles. You cannot assign a resource group that you create for an external component to a role. See <a href="./CREATE_RESOURCE_GROUP.html">CREATE RESOURCE GROUP</a> for additional information.</p><h2 id="parameters" tabindex="-1"><a id="section4"></a>Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Parameters&quot;">​</a></h2><p>name : The name of the role whose attributes are to be altered.</p><p>CURRENT_USER : Alter the current user instead of an explicitly identified role.</p><p>SESSION_USER : Alter the current session user instead of an explicitly identified role.</p><p>SUPERUSER NOSUPERUSER CREATEDB NOCREATEDB CREATEROLE NOCREATEROLE INHERIT NOINHERIT LOGIN NOLOGIN REPLICATION NOREPLICATION BYPASSRLS NOBYPASSRLS CONNECTION LIMIT connlimit [ ENCRYPTED ] PASSWORD &#39;password&#39; PASSWORD NULL VALID UNTIL &#39;timestamp&#39; : These clauses alter attributes originally set by <code>CREATE ROLE</code>. For more information, see the <a href="./CREATE_ROLE.html">CREATE ROLE</a> reference page.</p><p>new_name : The new name of the role.</p><p>database_name : The name of the database in which to set the configuration parameter.</p><p>configuration_parameter value : Set this role&#39;s session default for the specified configuration parameter to the given value. If value is <code>DEFAULT</code> or, equivalently, <code>RESET</code> is used, the role-specific parameter setting is removed, so the role will inherit the system-wide default setting in new sessions. Use <code>RESET ALL</code> to clear all role-specific settings. <code>SET FROM CURRENT</code> saves the session&#39;s current value of the parameter as the role-specific value. If <code>IN DATABASE</code> is specified, the configuration parameter is set or removed for the given role and database only.</p><p>: Role-specific variable settings take effect only at login; <a href="./SET_ROLE.html">SET ROLE</a> and <a href="./SET_SESSION_AUTHORIZATION.html">SET SESSION AUTHORIZATION</a> do not process role-specific variable settings.</p><p>: See <a href="./SET.html">SET</a> and <a href="./../config_params/guc_config.html">Server Configuration Parameters</a> for more information about allowed parameter names and values.</p><p>group_name : The name of the resource group to assign to this role. Specifying the group_name <code>NONE</code> removes the role&#39;s current resource group assignment and assigns a default resource group based on the role&#39;s capability. <code>SUPERUSER</code> roles are assigned the <code>admin_group</code> resource group, while the <code>default_group</code> resource group is assigned to non-admin roles.</p><p>: You cannot assign a resource group that you create for an external component to a role.</p><p>queue_name : The name of the resource queue to which the user-level role is to be assigned. Only roles with <code>LOGIN</code> privilege can be assigned to a resource queue. To unassign a role from a resource queue and put it in the default resource queue, specify <code>NONE</code>. A role can belong only to one resource queue.</p><h2 id="notes" tabindex="-1"><a id="section5"></a>Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Notes&quot;">​</a></h2><p>Use <a href="./CREATE_ROLE.html">CREATE ROLE</a> to add a new role, and <a href="./DROP_ROLE.html">DROP ROLE</a> to remove a role.</p><p><code>ALTER ROLE</code> cannot change a role&#39;s memberships; use <a href="./GRANT.html">GRANT</a> and <a href="./REVOKE.html">REVOKE</a> to do that.</p><p>You must exercise caution when specifying an unencrypted password with this command. The password will be transmitted to the server in clear text, and it might also be logged in the client&#39;s command history or the server log. The <a href="./../../utility_guide/ref/psql.html">psql</a> command-line client contains a meta-command <code>\\password</code> that can be used to change a role&#39;s password without exposing the clear text password.</p><p>It is also possible to tie a session default to a specific database rather than to a role; see <a href="./ALTER_DATABASE.html">ALTER DATABASE</a>. If there is a conflict, database-role-specific settings override role-specific ones, which in turn override database-specific ones.</p><h2 id="examples" tabindex="-1"><a id="section6"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>Change the password for a role:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE daria WITH PASSWORD &#39;passwd123&#39;;</span></span></code></pre></div><p>Remove a role&#39;s password:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE daria WITH PASSWORD NULL;</span></span></code></pre></div><p>Change a password expiration date, specifying that the password should expire at midday on 4th May 2022 using the time zone which is one hour ahead of UTC:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE scott VALID UNTIL &#39;May 4 12:00:00 2022 +1&#39;;</span></span></code></pre></div><p>Make a password valid forever:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE luke VALID UNTIL &#39;infinity&#39;;</span></span></code></pre></div><p>Give a role the ability to create other roles and new databases:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE joelle CREATEROLE CREATEDB;</span></span></code></pre></div><p>Give a role a non-default setting of the <code>maintenance_work_mem</code> parameter:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE admin SET maintenance_work_mem = 100000;</span></span></code></pre></div><p>Give a role a non-default, database-specific setting of the <code>client_min_messages</code> parameter:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE fred IN DATABASE devel SET client_min_messages = DEBUG;</span></span></code></pre></div><p>Assign a role to a resource queue:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE sammy RESOURCE QUEUE poweruser;</span></span></code></pre></div><p>Give a role permission to create writable external tables:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE load CREATEEXTTABLE (type=&#39;writable&#39;);</span></span></code></pre></div><p>Alter a role so it does not allow login access on Sundays:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE user3 DENY DAY &#39;Sunday&#39;;</span></span></code></pre></div><p>Alter a role to remove the constraint that does not allow login access on Sundays:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE user3 DROP DENY FOR DAY &#39;Sunday&#39;;</span></span></code></pre></div><p>Assign a new resource group to a role:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ALTER ROLE parttime_user RESOURCE GROUP rg_light;</span></span></code></pre></div><h2 id="compatibility" tabindex="-1"><a id="section7"></a>Compatibility <a class="header-anchor" href="#compatibility" aria-label="Permalink to &quot;&lt;a id=&quot;section7&quot;&gt;&lt;/a&gt;Compatibility&quot;">​</a></h2><p>The <code>ALTER ROLE</code> statement is a WarehousePG extension.</p><h2 id="see-also" tabindex="-1"><a id="section8"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section8&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./CREATE_ROLE.html">CREATE ROLE</a>, <a href="./DROP_ROLE.html">DROP ROLE</a>, <a href="./ALTER_DATABASE.html">ALTER DATABASE</a>, <a href="./SET.html">SET</a>, <a href="./CREATE_RESOURCE_GROUP.html">CREATE RESOURCE GROUP</a>, <a href="./CREATE_RESOURCE_QUEUE.html">CREATE RESOURCE QUEUE</a>, <a href="./GRANT.html">GRANT</a>, <a href="./REVOKE.html">REVOKE</a></p><p><strong>Parent topic:</strong> <a href="./../sql_commands/sql_ref.html">SQL Commands</a></p>`,60)]))}const u=a(o,[["render",i]]);export{E as __pageData,u as default};

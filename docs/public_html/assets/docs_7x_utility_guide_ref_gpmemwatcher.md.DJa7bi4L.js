import{_ as a,c as s,o as t,ag as n}from"./chunks/framework.Ds6Eueu6.js";const m=JSON.parse('{"title":"gpmemwatcher","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/utility_guide/ref/gpmemwatcher.md","filePath":"docs/7x/utility_guide/ref/gpmemwatcher.md"}'),o={name:"docs/7x/utility_guide/ref/gpmemwatcher.md"};function i(p,e,r,l,c,h){return t(),s("div",null,e[0]||(e[0]=[n(`<h1 id="gpmemwatcher" tabindex="-1">gpmemwatcher <a class="header-anchor" href="#gpmemwatcher" aria-label="Permalink to &quot;gpmemwatcher&quot;">​</a></h1><p>Tracks the memory usage of each process in a WarehousePG cluster.</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpmemwatcher [-f | --host_file &lt;hostfile&gt;]   </span></span>
<span class="line"><span>        </span></span>
<span class="line"><span>gpmemwatcher --stop [-f | --host_file &lt;hostfile&gt;]  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>gpmemwatcher --version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>gpmemwatcher -h | --help</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p>The <code>gpmemwatcher</code> utility is a daemon that runs on all servers of a WarehousePG cluster. It tracks the memory usage of each process by collecting the output of the <code>ps</code> command every 60 seconds. It is a low impact process that only consumes 4 MB of memory. It will generate approximately 30 MB of data over a 24-hour period.</p><p>You may use this utility if WarehousePG is reporting <code>Out of memory</code> errors and causing segments to go down or queries to fail. You collect the memory usage information of one or multiple servers within the WarehousePG cluster with <code>gpmemwatcher</code> and then use <a href="./gpmemreport.html">gpmemreport</a> to analyze the files collected.</p><h2 id="options" tabindex="-1"><a id="section4"></a>Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Options&quot;">​</a></h2><p>-f | --host_file hostfile : Indicates the hostfile input file that lists the hosts from which the utility should collect memory usage information. The file must include the hostnames and a working directory that exists on each one of the hosts. For example:</p><pre><code>\`\`\`
cdw:/home/gpadmin/gpmemwatcher_dir/working
sdw1:/home/gpadmin/gpmemwatcher_dir/working
sdw2:/home/gpadmin/gpmemwatcher_dir/working
sdw3:/home/gpadmin/gpmemwatcher_dir/working
sdw4:/home/gpadmin/gpmemwatcher_dir/working
\`\`\`
</code></pre><p>--stop : Stops all the <code>gpmemwatcher</code> processes, generates <code>.gz</code> data files in the current directory, and removes all the work files from all the hosts.</p><p>--version : Displays the version of this utility.</p><p>-h | --help : Displays the online help.</p><h2 id="examples" tabindex="-1"><a id="section5"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p><strong>Example 1: Start the utility specifying the list of hosts from which to collect the information</strong></p><p>Create the file <code>/home/gpadmin/hostmap.txt</code> that contains the following:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cdw:/home/gpadmin/gpmemwatcher_dir/working</span></span>
<span class="line"><span>sdw1:/home/gpadmin/gpmemwatcher_dir/working</span></span>
<span class="line"><span>sdw2:/home/gpadmin/gpmemwatcher_dir/working</span></span>
<span class="line"><span>sdw3:/home/gpadmin/gpmemwatcher_dir/working</span></span>
<span class="line"><span>sdw4:/home/gpadmin/gpmemwatcher_dir/working</span></span></code></pre></div><p>Make sure that the path <code>/home/gpadmin/gpmemwatcher_dir/working</code> exists on all hosts.</p><p>Start the utility:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ gpmemwatcher -f /home/gpadmin/hostmap.txt</span></span></code></pre></div><p><strong>Example 2: Stop utility and dump the resulting into a <code>.gz</code> file</strong></p><p>Stop the utility you started in Example 1:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ gpmemwatcher -f /home/gpadmin/hostmap.txt --stop</span></span></code></pre></div><p>The results <code>.gz</code> files will be dumped into the directory where you are running the command:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ [gpadmin@gpdb-m]$ ls -thrl</span></span>
<span class="line"><span>-rw-rw-r--. 1 gpadmin gpadmin 2.8K Nov 19 15:17 cdw.ps.out.gz</span></span>
<span class="line"><span>-rw-rw-r--. 1 gpadmin gpadmin 2.8K Nov 19 15:17 sdw1.ps.out.gz</span></span>
<span class="line"><span>-rw-rw-r--. 1 gpadmin gpadmin 2.8K Nov 19 15:17 sdw2.ps.out.gz</span></span>
<span class="line"><span>-rw-rw-r--. 1 gpadmin gpadmin 2.8K Nov 19 15:17 sdw3.ps.out.gz</span></span>
<span class="line"><span>-rw-rw-r--. 1 gpadmin gpadmin 2.8K Nov 19 15:17 sdw4.ps.out.gz</span></span></code></pre></div><h2 id="see-also" tabindex="-1"><a id="section6"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./gpmemreport.html">gpmemreport</a></p>`,27)]))}const g=a(o,[["render",i]]);export{m as __pageData,g as default};

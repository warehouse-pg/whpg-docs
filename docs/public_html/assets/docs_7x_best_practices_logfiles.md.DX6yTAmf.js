import{_ as t,c as o,o as d,ag as r}from"./chunks/framework.Ds6Eueu6.js";const f=JSON.parse('{"title":"Monitoring WarehousePG Log Files","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/best_practices/logfiles.md","filePath":"docs/7x/best_practices/logfiles.md"}'),s={name:"docs/7x/best_practices/logfiles.md"};function i(a,e,c,n,l,g){return d(),o("div",null,e[0]||(e[0]=[r('<h1 id="monitoring-warehousepg-log-files" tabindex="-1">Monitoring WarehousePG Log Files <a class="header-anchor" href="#monitoring-warehousepg-log-files" aria-label="Permalink to &quot;Monitoring WarehousePG Log Files&quot;">â€‹</a></h1><hr><p>Know the location and content of system log files and monitor them on a regular basis and not just when problems arise.</p><p>The following table shows the locations of the various WarehousePG log files. In file paths:</p><ul><li><code>$GPADMIN_HOME</code> refers to the home directory of the <code>gpadmin</code> operating system user.</li><li><code>$COORDINATOR_DATA_DIRECTORY</code> refers to the coordinator data directory on the WarehousePG coordinator host.</li><li><code>$GPDATA_DIR</code> refers to a data directory on the WarehousePG segment host.</li><li><code>host</code> identifies the WarehousePG segment host name.</li><li><code>segprefix</code> identifies the segment prefix.</li><li><code>N</code> identifies the segment instance number.</li><li><code>date</code> is a date in the format <code>YYYYMMDD</code>.</li></ul><table tabindex="0"><thead><tr><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code>$GPADMIN_HOME/gpAdminLogs/*</code></td><td>Many different types of log files, directory on each server. <code>$GPADMIN_HOME</code> is the default location for the <code>gpAdminLogs/</code> directory. You can specify a different location when you run an administrative utility command.</td></tr><tr><td><code>$GPADMIN_HOME/gpAdminLogs/gpinitsystem_date.log</code></td><td>system initialization log</td></tr><tr><td><code>$GPADMIN_HOME/gpAdminLogs/gpstart_date.log</code></td><td>start log</td></tr><tr><td><code>$GPADMIN_HOME/gpAdminLogs/gpstop_date.log</code></td><td>stop log</td></tr><tr><td><code>$GPADMIN_HOME/gpAdminLogs/gpsegstart.py_host:gpadmin_date.log</code></td><td>segment host start log</td></tr><tr><td><code>$GPADMIN_HOME/gpAdminLogs/gpsegstop.py_host:gpadmin_date.log</code></td><td>segment host stop log</td></tr><tr><td><code>$COORDINATOR_DATA_DIRECTORY/log/startup.log</code>, <code>$GPDATA_DIR/segprefixN/log/startup.log</code></td><td>segment instance start log</td></tr><tr><td><code>$COORDINATOR_DATA_DIRECTORY/log/*.csv</code>, <code>$GPDATA_DIR/segprefixN/log/*.csv</code></td><td>coordinator and segment database logs</td></tr><tr><td><code>$GPDATA_DIR/mirror/segprefixN/log/*.csv</code></td><td>mirror segment database logs</td></tr><tr><td><code>$GPDATA_DIR/primary/segprefixN/log/*.csv</code></td><td>primary segment database logs</td></tr><tr><td><code>/var/log/messages</code></td><td>Global Linux system messages</td></tr></tbody></table><blockquote><p><strong>Note</strong> If you manually set the server configuration parameter <a href="./../ref_guide/config_params/guc-list.html#log_directory">log_directory</a> to specify a different directory for log files, the items on the table above whose path is under <code>$COORDINATOR_DATA_DIRECTORY</code> or <code>$GPDATA_DIR</code> should point to the value of <code>log_directory</code> instead. Note that when you specify the value as an absolute path, or as a relative path that is outside the data directory, WarehousePG appends a subdirectory with a unique identifier (DBID) to the directory specified by this parameter. The unique identifier matches the value of <code>dbid</code> from <code>gp_segment_configuration</code>. For example, if you set <code>log_directory</code> as <code>/tmp/logs</code>, WarehousePG creates the directories: <code>/tmp/logs/1</code> for the coordinator, <code>/tmp/logs/2</code> for seg0, <code>/tmp/logs/3</code> for seg1, etcetera.</p></blockquote><p>Use <code>gplogfilter -t</code> (<code>--trouble</code>) first to search the coordinator log for messages beginning with <code>ERROR:</code>, <code>FATAL:</code>, or <code>PANIC:</code>. Messages beginning with <code>WARNING</code> may also provide useful information.</p><p>To search log files on the segment hosts, use the WarehousePG <code>gplogfilter</code> utility with <code>gpssh</code> to connect to segment hosts from the coordinator host. You can identify corresponding log entries in segment logs by the <code>statement_id</code>.</p><p>WarehousePG can be configured to rotate database logs based on the size and/or age of the current log file. The <code>log_rotation_size</code> configuration parameter sets the size of an individual log file that triggers rotation. When the current log file size is equal to or greater than this size, the file is closed and a new log file is created. The <code>log_rotation_age</code> configuration parameter specifies the age of the current log file that triggers rotation. When the specified time has elapsed since the current log file was created, a new log file is created. The default <code>log_rotation_age</code>, 1d, creates a new log file 24 hours after the current log file was created.</p><p><strong>Parent topic:</strong> <a href="./maintenance.html">System Monitoring and Maintenance</a></p>',11)]))}const p=t(s,[["render",i]]);export{f as __pageData,p as default};

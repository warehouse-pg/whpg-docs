import{_ as e,c as o,o as a,ag as s}from"./chunks/framework.Ds6Eueu6.js";const u=JSON.parse('{"title":"gpstate","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/utility_guide/ref/gpstate.md","filePath":"docs/7x/utility_guide/ref/gpstate.md"}'),r={name:"docs/7x/utility_guide/ref/gpstate.md"};function i(n,t,d,p,l,c){return a(),o("div",null,t[0]||(t[0]=[s(`<h1 id="gpstate" tabindex="-1">gpstate <a class="header-anchor" href="#gpstate" aria-label="Permalink to &quot;gpstate&quot;">​</a></h1><p>Shows the status of a running WarehousePG cluster.</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpstate [-d &lt;coordinator_data_directory&gt;] [-B &lt;parallel_processes&gt;] </span></span>
<span class="line"><span>          [-s | -b | -Q \\| -e\\] \\[-m \\| -c] [-p] [-i] [-f] [-v | -q] | -x </span></span>
<span class="line"><span>          [-l &lt;log_directory&gt;]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>gpstate -? | -h | --help</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p>The <code>gpstate</code> utility displays information about a running WarehousePG instance. There is additional information you may want to know about a WarehousePG cluster, since it is comprised of multiple PostgreSQL database instances (segments) spanning multiple machines. The <code>gpstate</code> utility provides additional status information for a WarehousePG cluster, such as:</p><ul><li>Which segments are down.</li><li>Coordinator and segment configuration information (hosts, data directories, etc.).</li><li>The ports used by the system.</li><li>A mapping of primary segments to their corresponding mirror segments.</li></ul><h2 id="options" tabindex="-1"><a id="section4"></a>Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Options&quot;">​</a></h2><p>-b (brief status) : Optional. Display a brief summary of the state of the WarehousePG cluster. This is the default option.</p><p>-B parallel_processes : The number of segments to check in parallel. If not specified, the utility will start up to 60 parallel processes depending on how many segment instances it needs to check.</p><p>-c (show primary to mirror mappings) : Optional. Display mapping of primary segments to their corresponding mirror segments.</p><p>-d coordinator_data_directory : Optional. The coordinator data directory. If not specified, the value set for <code>$COORDINATOR_DATA_DIRECTORY</code> will be used.</p><p>-e (show segments with mirror status issues) : Show details on primary/mirror segment pairs that have potential issues. These issues include:</p><pre><code>-   Whether any segments are down.
-   Whether any primary-mirror segment pairs are out of sync – including information on how many bytes are remaining to sync \\(as displayed in the \`WAL sync remaining bytes\` output field\\).

    &gt; **Note** \`gpstate -e\` does not display segment pairs that are in sync.


    &gt; **Note** You must have \`rsync\` version 3.1.x or higher installed in order to view the tracking information for segments undergoing a differential recovery.

-   Whether any primary-mirror segment pairs are not in their preferred roles.
</code></pre><p>-f (show standby coordinator details) : Display details of the standby coordinator host if configured.</p><p>-i (show WarehousePG version) : Display the WarehousePG software version information for each instance.</p><p>-l logfile_directory : The directory to write the log file. Defaults to <code>~/gpAdminLogs</code>.</p><p>-m (list mirrors) : Optional. List the mirror segment instances in the system and their current role.</p><p>-p (show ports) : List the port numbers used throughout the WarehousePG cluster.</p><p>-q (no screen output) : Optional. Run in quiet mode. Except for warning messages, command output is not displayed on the screen. However, this information is still written to the log file.</p><p>-Q (quick status) : Optional. Checks segment status in the system catalog on the coordinator host. Does not poll the segments for status.</p><p>-s (detailed status) : Optional. Displays detailed status information about the WarehousePG cluster.</p><p>-v (verbose output) : Optional. Displays error messages and outputs detailed status and progress information.</p><p>-x (expand) : Optional. Displays detailed information about the progress and state of a WarehousePG cluster expansion.</p><p>-? | -h | --help (help) : Displays the online help.</p><h2 id="output-field-definitions" tabindex="-1"><a id="section5"></a>Output Field Definitions <a class="header-anchor" href="#output-field-definitions" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Output Field Definitions&quot;">​</a></h2><p>The following output fields are reported by <code>gpstate -s</code> for the coordinator:</p><table tabindex="0"><thead><tr><th>Output Data</th><th>Description</th></tr></thead><tbody><tr><td>Coordinator host</td><td>host name of the coordinator</td></tr><tr><td>Coordinator postgres process ID</td><td>PID of the coordinator database listener process</td></tr><tr><td>Coordinator data directory</td><td>file system location of the coordinator data directory</td></tr><tr><td>Coordinator port</td><td>port of the coordinator <code>postgres</code> database listener process</td></tr><tr><td>Coordinator current role</td><td>dispatch = regular operating mode<br><br>utility = maintenance mode</td></tr><tr><td>WarehousePG cluster configuration type</td><td>Standard = one NIC per host<br><br>Multi-Home = multiple NICs per host</td></tr><tr><td>WarehousePG initsystem version</td><td>version of WarehousePG when system was first initialized</td></tr><tr><td>WarehousePG current version</td><td>current version of WarehousePG</td></tr><tr><td>Postgres version</td><td>version of PostgreSQL that WarehousePG is based on</td></tr><tr><td>WarehousePG mirroring status</td><td>physical mirroring or none</td></tr><tr><td>Coordinator standby</td><td>host name of the standby coordinator</td></tr><tr><td>Standby coordinator state</td><td>status of the standby coordinator: active or passive</td></tr></tbody></table><p>The following output fields are reported by <code>gpstate -s</code> for each primary segment:</p><table tabindex="0"><thead><tr><th>Output Data</th><th>Description</th></tr></thead><tbody><tr><td>Hostname</td><td>system-configured host name</td></tr><tr><td>Address</td><td>network address host name (NIC name)</td></tr><tr><td>Datadir</td><td>file system location of segment data directory</td></tr><tr><td>Port</td><td>port number of segment <code>postgres</code> database listener process</td></tr><tr><td>Current Role</td><td>current role of a segment: Mirror or Primary</td></tr><tr><td>Preferred Role</td><td>role at system initialization time: Mirror or Primary</td></tr><tr><td>Mirror Status</td><td>status of a primary/mirror segment pair:<br><br>Synchronized = data is up to date on both<br><br>Not in Sync = the mirror segment has not caught up to the primary segment</td></tr><tr><td>Current write location</td><td>Location where primary segment is writing new logs as they come in</td></tr><tr><td>Bytes remaining to send to mirror</td><td>Bytes remaining to be sent from primary to mirror</td></tr><tr><td>Active PID</td><td>active process ID of a segment</td></tr><tr><td>Coordinator reports status as</td><td>segment status as reported in the system catalog: Up or Down</td></tr><tr><td>Database status</td><td>status of WarehousePG to incoming requests: Up, Down, or Suspended. A Suspended state means database activity is temporarily paused while a segment transitions from one state to another.</td></tr></tbody></table><p>The following output fields are reported by <code>gpstate -s</code> for each mirror segment:</p><table tabindex="0"><thead><tr><th>Output Data</th><th>Description</th></tr></thead><tbody><tr><td>Hostname</td><td>system-configured host name</td></tr><tr><td>Address</td><td>network address host name (NIC name)</td></tr><tr><td>Datadir</td><td>file system location of segment data directory</td></tr><tr><td>Port</td><td>port number of segment <code>postgres</code> database listener process</td></tr><tr><td>Current Role</td><td>current role of a segment: Mirror or Primary</td></tr><tr><td>Preferred Role</td><td>role at system initialization time: Mirror or Primary</td></tr><tr><td>Mirror Status</td><td>status of a primary/mirror segment pair:<br><br>Synchronized = data is up to date on both<br><br>Not in Sync = the mirror segment has not caught up to the primary segment</td></tr><tr><td>WAL Sent Location</td><td>Log location up to which the primary segment has sent log data to the mirror</td></tr><tr><td>WAL Flush Location</td><td>Log location up to which the mirror segment has flushed the log data to disk</td></tr><tr><td>WAL Replay Location</td><td>Log location up to which the mirror segment has replayed logs locally</td></tr><tr><td>Bytes received but remain to flush</td><td>Difference between flush log location and sent log location</td></tr><tr><td>Bytes received but remain to replay</td><td>Difference between replay log location and sent log location</td></tr><tr><td>Active PID</td><td>active process ID of a segment</td></tr><tr><td>Coordinator reports status as</td><td>segment status as reported in the system catalog: Up or Down</td></tr><tr><td>Database status</td><td>status of WarehousePG to incoming requests: Up, Down, or Suspended. A Suspended state means database activity is temporarily paused while a segment transitions from one state to another.</td></tr></tbody></table><blockquote><p><strong>Note</strong> When there is no connection between a primary segment and its mirror, <code>gpstate -s</code> displays <code>Unknown</code> in the following fields:</p></blockquote><ul><li><code>Bytes remaining to send to mirror</code></li><li><code>WAL Sent Location</code></li><li><code>WAL Flush Location</code></li><li><code>WAL Replay Location</code></li><li><code>Bytes received but remain to flush</code></li><li><code>Bytes received but remain to replay</code></li></ul><p>The following output fields are reported by <code>gpstate -f</code> for standby coordinator replication status:</p><table tabindex="0"><thead><tr><th>Output Data</th><th>Description</th></tr></thead><tbody><tr><td>Standby address</td><td>hostname of the standby coordinator</td></tr><tr><td>Standby data dir</td><td>file system location of the standby coordinator data directory</td></tr><tr><td>Standby port</td><td>port of the standby coordinator <code>postgres</code> database listener process</td></tr><tr><td>Standby PID</td><td>process ID of the standby coordinator</td></tr><tr><td>Standby status</td><td>status of the standby coordinator: Standby host passive</td></tr><tr><td>WAL Sender State</td><td>write-ahead log (WAL) streaming state: streaming, startup,backup, catchup</td></tr><tr><td>Sync state</td><td>WAL sender synchronization state: sync</td></tr><tr><td>Sent Location</td><td>WAL sender transaction log (xlog) record sent location</td></tr><tr><td>Flush Location</td><td>WAL receiver xlog record flush location</td></tr><tr><td>Replay Location</td><td>standby xlog record replay location</td></tr></tbody></table><h2 id="examples" tabindex="-1"><a id="section6"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>Show detailed status information of a WarehousePG cluster:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpstate -s</span></span></code></pre></div><p>Do a quick check for down segments in the coordinator host system catalog:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpstate -Q</span></span></code></pre></div><p>Show information about mirror segment instances:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpstate -m</span></span></code></pre></div><p>Show information about the standby coordinator configuration:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpstate -f</span></span></code></pre></div><p>Display the WarehousePG software version information:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpstate -i</span></span></code></pre></div><h2 id="see-also" tabindex="-1"><a id="section7"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section7&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./gpstart.html">gpstart</a>, <a href="./gpexpand.html">gpexpand</a><a href="./gplogfilter.html">gplogfilter</a></p>`,49)]))}const m=e(r,[["render",i]]);export{u as __pageData,m as default};

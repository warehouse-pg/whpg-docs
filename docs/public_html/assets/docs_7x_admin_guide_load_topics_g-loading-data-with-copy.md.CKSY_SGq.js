import{_ as a,c as t,o,ag as i}from"./chunks/framework.Ds6Eueu6.js";const g=JSON.parse('{"title":"Loading Data with COPY","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/admin_guide/load/topics/g-loading-data-with-copy.md","filePath":"docs/7x/admin_guide/load/topics/g-loading-data-with-copy.md"}'),d={name:"docs/7x/admin_guide/load/topics/g-loading-data-with-copy.md"};function n(s,e,c,l,p,h){return o(),t("div",null,e[0]||(e[0]=[i('<h1 id="loading-data-with-copy" tabindex="-1">Loading Data with COPY <a class="header-anchor" href="#loading-data-with-copy" aria-label="Permalink to &quot;Loading Data with COPY&quot;">​</a></h1><hr><p><code>COPY FROM</code> copies data from a file or standard input into a table and appends the data to the table contents. <code>COPY</code> is non-parallel: data is loaded in a single process using the WarehousePG coordinator instance. Using <code>COPY</code> is only recommended for very small data files.</p><p>The <code>COPY</code> source file must be accessible to the <code>postgres</code> process on the coordinator host. Specify the <code>COPY</code> source file name relative to the data directory on the coordinator host, or specify an absolute path.</p><p>WarehousePG copies data from <code>STDIN</code> or <code>STDOUT</code> using the connection between the client and the coordinator server.</p><p><strong>Parent topic:</strong> <a href="./../../load/topics/g-loading-and-unloading-data.html">Loading and Unloading Data</a></p><h2 id="loading-from-a-file" tabindex="-1"><a id="topic1"></a>Loading From a File <a class="header-anchor" href="#loading-from-a-file" aria-label="Permalink to &quot;&lt;a id=&quot;topic1&quot;&gt;&lt;/a&gt;Loading From a File&quot;">​</a></h2><p>The <code>COPY</code> command asks the <code>postgres</code> backend to open the specified file, read it and append it to the table. In order to be able to read the file, the backend needs to have read permissions on the file, and the file name must be specified using an absolute path on the coordinator host, or a relative path to the coordinator data directory.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>COPY &lt;table_name&gt; FROM &lt;/path/to/filename&gt;;</span></span></code></pre></div><h2 id="loading-from-stdin" tabindex="-1"><a id="topic2"></a>Loading From STDIN <a class="header-anchor" href="#loading-from-stdin" aria-label="Permalink to &quot;&lt;a id=&quot;topic2&quot;&gt;&lt;/a&gt;Loading From STDIN&quot;">​</a></h2><p>To avoid the problem of copying the data file to the coordinator host before loading the data, <code>COPY FROM STDIN</code> uses the Standard Input channel and feeds data directly into the <code>postgres</code> backend. After the <code>COPY FROM STDIN</code> command started, the backend will accept lines of data until a single line only contains a backslash-period (\\.).</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>COPY &lt;table_name&gt; FROM &lt;STDIN&gt;;</span></span></code></pre></div><h2 id="loading-data-using-copy-in-psql" tabindex="-1"><a id="topic3"></a>Loading Data Using \\copy in psql <a class="header-anchor" href="#loading-data-using-copy-in-psql" aria-label="Permalink to &quot;&lt;a id=&quot;topic3&quot;&gt;&lt;/a&gt;Loading Data Using \\\\copy in psql&quot;">​</a></h2><p>Do not confuse the psql <code>\\copy</code> command with the <code>COPY</code> SQL command. The <code>\\copy</code> invokes a regular <code>COPY FROM STDIN</code> and sends the data from the psql client to the backend. Therefore any file must reside on the host where the psql client runs, and must be accessible to the user which runs the client.</p><p>To avoid the problem of copying the data file to the coordinator host before loading the data, <code>COPY FROM STDIN</code> uses the Standard Input channel and feeds data directly into the <code>postgres</code> backend. After the <code>COPY FROM STDIN</code> command started, the backend will accept lines of data until a single line only contains a backslash-period (\\.). psql is wrapping all of this into the handy <code>\\copy</code> command.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>\\copy &lt;table_name&gt; FROM &lt;filename&gt;;</span></span></code></pre></div><h2 id="input-format" tabindex="-1"><a id="topic4"></a>Input Format <a class="header-anchor" href="#input-format" aria-label="Permalink to &quot;&lt;a id=&quot;topic4&quot;&gt;&lt;/a&gt;Input Format&quot;">​</a></h2><p><code>COPY FROM</code> accepts a <code>FORMAT</code> parameter, which specifies the format of the input data. The possible values are <code>TEXT</code>, <code>CSV</code> (Comma Separated Values), and <code>BINARY</code>.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>COPY &lt;table_name&gt; FROM &lt;/path/to/filename&gt; WITH (FORMAT csv);</span></span></code></pre></div><p>The <code>FORMAT csv</code> will read comma-separated values. The <code>FORMAT text</code> by default uses tabulators to separate the values, the <code>DELIMITER</code> option specifies a different character as value delimiter.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>COPY &lt;table_name&gt; FROM &lt;/path/to/filename&gt; WITH (FORMAT text, DELIMITER &#39;|&#39;);</span></span></code></pre></div><p>By default, the default client encoding is used, this can be changed with the <code>ENCODING</code> option. This is useful if data is coming from another operating system.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>COPY &lt;table_name&gt; FROM &lt;/path/to/filename&gt; WITH (ENCODING &#39;latin1&#39;);</span></span></code></pre></div>',23)]))}const u=a(d,[["render",n]]);export{g as __pageData,u as default};

import{_ as o,c as r,o as t,ag as a}from"./chunks/framework.Ds6Eueu6.js";const h=JSON.parse('{"title":"About Changes to Resource Groups in WarehousePG 7","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/admin_guide/about-resgroups-changes.md","filePath":"docs/7x/admin_guide/about-resgroups-changes.md"}'),s={name:"docs/7x/admin_guide/about-resgroups-changes.md"};function i(d,e,c,u,n,m){return t(),r("div",null,e[0]||(e[0]=[a('<h1 id="about-changes-to-resource-groups-in-warehousepg-7" tabindex="-1">About Changes to Resource Groups in WarehousePG 7 <a class="header-anchor" href="#about-changes-to-resource-groups-in-warehousepg-7" aria-label="Permalink to &quot;About Changes to Resource Groups in WarehousePG 7&quot;">​</a></h1><hr><p>WarehousePG 7 introduces substantial changes to resource group-based resource management. This topic compares the differences between resource groups with WarehousePG 6 and WarehousePG 7. Visit <a href="./workload_mgmt_resgroups.html">Using Resource Groups</a> for more information about how resource groups work in WarehousePG 7.</p><p>The following table compares the main concepts of resource management and how each version of WarehousePG implements them:</p><table tabindex="0"><thead><tr><th>Metric</th><th>Resource Groups in WarehousePG 6</th><th>Resource Groups in WarehousePG 7</th></tr></thead><tbody><tr><td>Concurrency</td><td>Managed at the transaction level</td><td>Managed at the transaction level</td></tr><tr><td>CPU</td><td>Specify percentage of CPU resources or the number of CPU cores; uses Linux Control Groups</td><td>Specify percentage of CPU resources or the number of CPU cores, as well as set upper limits per resource group; uses Linux Control Groups</td></tr><tr><td>Memory</td><td>Managed at the transaction level, with enhanced allocation and tracking; users cannot over-subscribe</td><td>Managed at the transaction level, with enhanced allocation and tracking; users can over-subscribe; simpler and more convenient configuration</td></tr><tr><td>Disk I/O</td><td>None</td><td>Limit the maximum read/write disk I/O throughput, and maximum read/write I/O operations per second</td></tr><tr><td>Users</td><td>Limits are applied to <code>SUPERUSER</code> and non-admin users alike<br>There are two default resource groups: <code>admin_group</code> and <code>default_group</code></td><td>Limits are applied to <code>SUPERUSER</code>, non-admin users, and system processes of non-user classes<br>There are three default resource groups: <code>admin_group</code>, <code>default_group</code>, and <code>system_group</code></td></tr><tr><td>Queueing</td><td>Queue when no slot is available or not enough available memory</td><td>Queue when no slot is available</td></tr><tr><td>Query Failure</td><td>Query may fail after reaching transaction fixed memory limit when no shared resource group memory exists and the transaction requests more memory</td><td>Query may fail if the allocated memory for the query surpasses the available system memory and spill limits</td></tr><tr><td>Limit Bypass</td><td>Limits are not enforced on <code>SET</code>, <code>RESET</code>, and <code>SHOW</code> commands</td><td>Limits are not enforced on <code>SET</code>, <code>RESET</code>, and <code>SHOW</code> commands. Additionally, certain queries may be configured to bypass the concurrency limit</td></tr><tr><td>External Components</td><td>Manage PL/Container CPU and memory resources</td><td>Manage PL/Container CPU resources</td></tr></tbody></table><blockquote><p><strong>Note</strong> Disk I/O limits are only available when you use Linux Control Groups v2. See <a href="./workload_mgmt_resgroups.html#topic71717999">Configuring and Using Resource Groups</a> for more information.</p></blockquote><h3 id="changes-to-resource-groups-attributes" tabindex="-1"><a id="attributes"></a>Changes to Resource Groups Attributes <a class="header-anchor" href="#changes-to-resource-groups-attributes" aria-label="Permalink to &quot;&lt;a id=&quot;attributes&quot;&gt;&lt;/a&gt;Changes to Resource Groups Attributes&quot;">​</a></h3><p>You may configure four new resource group attributes using the <code>CREATE RESOURCE GROUP</code> and <code>ALTER RESOURCE GROUP</code> SQL commands:</p><ul><li><code>CPU_MAX_PERCENT</code>, which configures the maximum amount of CPU resources the resource group can use.</li><li><code>CPU_WEIGHT</code>, which configures the scheduling priority of the resource group.</li><li><code>MIN_COST</code>, which configures the minimum amount a query&#39;s query plan cost for the query to remain in the resource group.</li><li><code>IO_LIMIT</code>, which configures device I/O usage at the resource group level to manage the maximum throughput of read/write operations, and the maximum read/write operations per second.</li></ul><p>The following resource group attributes have been removed:</p><ul><li><code>CPU_RATE_LIMIT</code></li><li><code>MEMORY_AUDITOR</code></li><li><code>MEMORY_SPILL_RATIO</code></li><li><code>MEMORY_SHARED_QUOTA</code></li></ul><h3 id="changes-to-server-configuration-parameters" tabindex="-1"><a id="gucs"></a>Changes to Server Configuration Parameters <a class="header-anchor" href="#changes-to-server-configuration-parameters" aria-label="Permalink to &quot;&lt;a id=&quot;gucs&quot;&gt;&lt;/a&gt;Changes to Server Configuration Parameters&quot;">​</a></h3><p>WarehousePG 7 resource group management introduces the following changes to server configuration parameters:</p><ul><li><p>The possible settings for the <a href="./../ref_guide/config_params/guc-list.html#gp_resource_manager">gp_resource_manager</a> server configuration parameter have changed. They now include the following:</p><ul><li><code>none</code> - Configures WarehousePG to not use any resource manager. This is the default.</li><li><code>group</code> - Configures WarehousePG to use resource groups and base resource group behavior on the cgroup v1 version of Linux cgroup functionality.</li><li><code>group-v2</code> - Configures WarehousePG to use resource groups and base resource group behavior on the cgroup v2 version of Linux cgroup functionality.</li><li><code>queue</code> - Configures WarehousePG to use resource queues.</li></ul></li><li><p>The new server configuration parameter <a href="./../ref_guide/config_params/guc-list.html#gp_resgroup_memory_query_fixed_mem">gp_resgroup_memory_query_fixed_mem</a> allows you to override at a session level the fixed amount of memory reserved for all queries in a resource group.</p></li><li><p>The new server configuration parameter <a href="./../ref_guide/config_params/guc-list.html#gp_resource_group_move_timeout">gp_resource_group_move_timeout</a> cancels the <code>pg_resgroup_move_query()</code> function, which moves a running query from one resouce group to another, if it waits longer than the specified number of miliseconds.</p></li><li><p>The new server configuration parameter <a href="./../ref_guide/config_params/guc-list.html#gp_resource_group_bypass_direct_dispatch">gp_resource_group_bypass_direct_dispatch</a> bypasses the resource group&#39;s limits for a direct dispatch query so it can run immediately. A direct dispatch query is a special type of query that only requires a single segment to participate in the execution.</p></li><li><p>The server configuration parameter <code>gp_resource_group_cpu_ceiling_enforcement</code> has been removed.</p></li><li><p>The server configuration parameter <code>gp_resource_group_enable_recalculate_query_mem</code> has been removed.</p></li><li><p>The server configuration parameter <code>gp_resource_group_memory_limit</code> has been removed.</p></li></ul><h3 id="changes-to-system-views" tabindex="-1"><a id="views"></a>Changes to System Views <a class="header-anchor" href="#changes-to-system-views" aria-label="Permalink to &quot;&lt;a id=&quot;views&quot;&gt;&lt;/a&gt;Changes to System Views&quot;">​</a></h3><p>The following system views have changes:</p><ul><li>The fields <code>cpu_rate_limit</code>, <code>memory_shared_quota</code>, <code>memory_spill_ratio</code>, and <code>memory_auditor</code> have been replaced by <code>cpu_max_percent</code>, <code>cpu_weight</code>, <code>cpuset</code>, <code>min_cost</code>, and <code>io_limit</code> in the <code>gp_resgroups_config</code> system view.</li><li>The field <code>rsgname</code> has been renamed to <code>groupname</code> in the <code>gp_resgroup_status</code> system view.</li><li>The fields <code>cpu_usage</code> and <code>memory_usage</code> have been removed from the <code>gp_resgroup_status</code> system view to the <code>gp_resgroup_status_per_host</code> system view.</li><li>The fields <code>hostname</code>, <code>cpu</code>, <code>memory_used</code>, <code>memory_available</code>, <code>memory_quota_used</code>, <code>memory_quota_available</code>, <code>memory_shared_used</code>, and <code>memory_shared_available</code> have been removed from the system view <code>gp_resgroup_status_per_host</code>. The fields <code>segment_id</code>, <code>cpu_usage</code> and <code>memory_usage</code> have been added to the view.</li><li>The fields <code>rsgname</code>, <code>hostname</code>, <code>cpu</code>, <code>memory_used</code>, <code>memory_available</code>, <code>memory_quota_used</code>, <code>memory_quota_available</code>, <code>memory_shared_used</code>, and <code>memory_shared_available</code> have been removed from the system view <code>gp_resgroup_status_per_segment</code>. The fields <code>groupname</code>, and <code>vmem_usage</code> have been added to the view.</li><li>The <code>gp_resgroup_iostats_per_host</code> system view has been added.</li></ul>',17)]))}const g=o(s,[["render",i]]);export{h as __pageData,g as default};

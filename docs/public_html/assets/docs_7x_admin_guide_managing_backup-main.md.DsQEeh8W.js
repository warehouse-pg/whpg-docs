import{_ as a,c as t,o,ag as r}from"./chunks/framework.Ds6Eueu6.js";const s="/assets/nonpar_restore.DX1fy36l.jpg",g=JSON.parse('{"title":"Backing Up and Restoring Databases","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/admin_guide/managing/backup-main.md","filePath":"docs/7x/admin_guide/managing/backup-main.md"}'),n={name:"docs/7x/admin_guide/managing/backup-main.md"};function i(l,e,d,c,p,u){return o(),t("div",null,e[0]||(e[0]=[r('<h1 id="backing-up-and-restoring-databases" tabindex="-1">Backing Up and Restoring Databases <a class="header-anchor" href="#backing-up-and-restoring-databases" aria-label="Permalink to &quot;Backing Up and Restoring Databases&quot;">​</a></h1><hr><p>Performing backups regularly ensures that you can restore your data or rebuild your WarehousePG cluster if data corruption or a system failure occurs. You can also use backups to migrate data from one WarehousePG cluster to another.</p><p>WarehousePG supports parallel and non-parallel methods for backing up and restoring databases. Parallel operations scale regardless of the number of segments in your system, because segment hosts each write their data to local disk storage simultaneously. With non-parallel backup and restore operations, the data must be sent over the network from the segments to the coordinator, which writes all of the data to its storage. In addition to restricting I/O to one host, non-parallel backup requires that the coordinator have sufficient local disk storage to store the entire database.</p><h2 id="parallel-backup-with-gpbackup-and-gprestore" tabindex="-1"><a id="parback"></a>Parallel Backup with gpbackup and gprestore <a class="header-anchor" href="#parallel-backup-with-gpbackup-and-gprestore" aria-label="Permalink to &quot;&lt;a id=&quot;parback&quot;&gt;&lt;/a&gt;Parallel Backup with gpbackup and gprestore&quot;">​</a></h2><p><code>gpbackup</code> and <code>gprestore</code> are the recommended WarehousePG backup and restore utilities. <code>gpbackup</code> utilizes <code>ACCESS SHARE</code> locks at the individual table level, instead of <code>EXCLUSIVE</code> locks on the <code>pg_class</code> catalog table. This enables you to run DML statements during the backup, such as <code>CREATE</code>, <code>ALTER</code>, <code>DROP</code>, and <code>TRUNCATE</code> operations, as long as those operations do not target the current backup set. Backup files created with <code>gpbackup</code> are designed to provide future capabilities for restoring individual database objects along with their dependencies, such as functions and required user-defined datatypes.</p><p><code>gpbackup</code>, <code>gprestore</code>, and related utilities are provided as a separate download, <a href="https://network.pivotal.io/products/pivotal-gpdb-backup-restore" target="_blank" rel="noreferrer">WarehousePG® Backup and Restore</a>. Follow the instructions in the <a href="https://docs.vmware.com/en/VMware-WarehousePG-Backup-and-Restore/index.html" target="_blank" rel="noreferrer">WarehousePG Backup and Restore Documentation</a> to install and use these utilities.</p><h2 id="non-parallel-backup-with-pg-dump" tabindex="-1"><a id="nparback"></a>Non-Parallel Backup with pg_dump <a class="header-anchor" href="#non-parallel-backup-with-pg-dump" aria-label="Permalink to &quot;&lt;a id=&quot;nparback&quot;&gt;&lt;/a&gt;Non-Parallel Backup with pg\\_dump&quot;">​</a></h2><p>The PostgreSQL <code>pg_dump</code> and <code>pg_dumpall</code> non-parallel backup utilities can be used to create a single dump file on the coordinator host that contains all data from all active segments.</p><p>The PostgreSQL non-parallel utilities should be used only for special cases. They are much slower than using the WarehousePG backup utilities since all of the data must pass through the coordinator. Additionally, it is often the case that the coordinator host has insufficient disk space to save a backup of an entire distributed WarehousePG.</p><p>The <code>pg_restore</code> utility requires compressed dump files created by <code>pg_dump</code> or <code>pg_dumpall</code>. To perform a non-parallel restore using parallel backup files, you can copy the backup files from each segment host to the coordinator host, and then load them through the coordinator.</p><p><img src="'+s+'" alt="Non-parallel Restore Using Parallel Backup Files" title="Non-parallel Restore Using Parallel Backup Files"></p><p>Another non-parallel method for backing up WarehousePG data is to use the <code>COPY TO</code> SQL command to copy all or a portion of a table out of the database to a delimited text file on the coordinator host.</p><p><strong>Parent topic:</strong> <a href="./../managing/managing.html">Managing a WarehousePG cluster</a></p>',14)]))}const b=a(n,[["render",i]]);export{g as __pageData,b as default};

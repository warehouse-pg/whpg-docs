import{_ as a,c as t,o as i,ag as s}from"./chunks/framework.Ds6Eueu6.js";const h=JSON.parse('{"title":"CREATE MATERIALIZED VIEW","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/ref_guide/sql_commands/CREATE_MATERIALIZED_VIEW.md","filePath":"docs/7x/ref_guide/sql_commands/CREATE_MATERIALIZED_VIEW.md"}'),o={name:"docs/7x/ref_guide/sql_commands/CREATE_MATERIALIZED_VIEW.md"};function n(l,e,r,d,c,p){return i(),t("div",null,e[0]||(e[0]=[s(`<h1 id="create-materialized-view" tabindex="-1">CREATE MATERIALIZED VIEW <a class="header-anchor" href="#create-materialized-view" aria-label="Permalink to &quot;CREATE MATERIALIZED VIEW&quot;">​</a></h1><p>Defines a new materialized view.</p><h2 id="synopsis" tabindex="-1"><a id="section1"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section1&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CREATE MATERIALIZED VIEW [ IF  NOT EXISTS ] &lt;table_name&gt;</span></span>
<span class="line"><span>    [ (&lt;column_name&gt; [, ...] ) ]</span></span>
<span class="line"><span>    [ USING &lt;method&gt; ]</span></span>
<span class="line"><span>    [ WITH ( &lt;storage_parameter&gt; [= &lt;value&gt;] [, ... ] ) ]</span></span>
<span class="line"><span>    [ TABLESPACE &lt;tablespace_name&gt; ]</span></span>
<span class="line"><span>    AS &lt;query&gt;</span></span>
<span class="line"><span>    [ WITH [ NO ] DATA ]</span></span>
<span class="line"><span>    [DISTRIBUTED {| BY &lt;column&gt; [&lt;opclass&gt;], [ ... ] | RANDOMLY | REPLICATED }]</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p><code>CREATE MATERIALIZED VIEW</code> defines a materialized view of a query. The query is run and used to populate the view at the time the command is issued (unless <code>WITH NO DATA</code> is used) and can be refreshed later using <a href="./REFRESH_MATERIALIZED_VIEW.html">REFRESH MATERIALIZED VIEW</a>.</p><p><code>CREATE MATERIALIZED VIEW</code> is similar to <code>CREATE TABLE AS</code>, except that it also remembers the query used to initialize the view, so that it can be refreshed later upon demand. To refresh materialized view data, use the <code>REFRESH MATERIALIZED VIEW</code> command. A materialized view has many of the same properties as a table, but there is no support for temporary materialized views.</p><h2 id="parameters" tabindex="-1"><a id="section4"></a>Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Parameters&quot;">​</a></h2><p>IF NOT EXISTS : Do not throw an error if a materialized view with the same name already exists. A notice is issued in this case. Note that there is no guarantee that the existing materialized view is anything like the one that would have been created.</p><p>table_name : The name (optionally schema-qualified) of the materialized view to be created.</p><p>column_name : The name of a column in the new materialized view. The column names are assigned based on position. The first column name is assigned to the first column of the query result, and so on. If a column name is not provided, it is taken from the output column names of the query.</p><p>USING method : This optional clause specifies the table access method to use to store the contents for the new materialized view; the method needs be an access method of type <code>TABLE</code>. If this option is not specified, the default table access method is chosen for the new materialized view. See <a href="./../config_params/guc-list.html">default_table_access_method</a> for more information.</p><p>WITH ( storage_parameter [= value] [, ... ] ) : This clause specifies optional storage parameters for the materialized view. All parameters supported for <code>CREATE TABLE</code> are also supported for <code>CREATE MATERIALIZED VIEW</code>. See <a href="./CREATE_TABLE.html">CREATE TABLE</a> for more information.</p><p>TABLESPACE tablespace_name : The tablespace_name is the name of the tablespace in which the new materialized view is to be created. If not specified, server configuration parameter <a href="./../config_params/guc-list.html">default_tablespace</a> is consulted.</p><p>query : A <a href="./SELECT.html">SELECT</a>, <a href="./SELECT.html#table-command">TABLE</a>, or <a href="./VALUES.html">VALUES</a> command. This query will run within a security-restricted operation; in particular, calls to functions that themselves create temporary tables will fail.</p><p>WITH [ NO ] DATA : This clause specifies whether or not the materialized view should be populated with data at creation time. <code>WITH DATA</code> is the default, populate the materialized view. For <code>WITH NO DATA</code>, the materialized view is not populated with data, is flagged as unscannable, and cannot be queried until <code>REFRESH MATERIALIZED VIEW</code> is used to populate the materialized view.</p><p>DISTRIBUTED BY (column [opclass], [ ... ] ) DISTRIBUTED RANDOMLY DISTRIBUTED REPLICATED : Used to declare the WarehousePG distribution policy for the materialized view data. For information about a table distribution policy, see <a href="./CREATE_TABLE.html">CREATE TABLE</a>.</p><h2 id="notes" tabindex="-1"><a id="section5"></a>Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Notes&quot;">​</a></h2><p>Materialized views are read only. The system will not allow an <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> on a materialized view. Use <code>REFRESH MATERIALIZED VIEW</code> to update the materialized view data.</p><p>If you want the data to be ordered upon generation, you must use an <code>ORDER BY</code> clause in the materialized view query. However, if a materialized view query contains an <code>ORDER BY</code> or <code>SORT</code> clause, the data is not guaranteed to be ordered or sorted if <code>SELECT</code> is performed on the materialized view.</p><h2 id="examples" tabindex="-1"><a id="section6"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>Create a view consisting of all comedy films:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CREATE MATERIALIZED VIEW comedies AS SELECT * FROM films </span></span>
<span class="line"><span>WHERE kind = &#39;comedy&#39;;</span></span></code></pre></div><p>This will create a view containing the columns that are in the <code>film</code> table at the time of view creation. Though <code>*</code> was used to create the materialized view, columns added later to the table will not be part of the view.</p><p>Create a view that gets the top ten ranked baby names:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CREATE MATERIALIZED VIEW topten AS SELECT name, rank, gender, year FROM </span></span>
<span class="line"><span>names, rank WHERE rank &lt; &#39;11&#39; AND names.id=rank.id;</span></span></code></pre></div><h2 id="compatibility" tabindex="-1"><a id="section7"></a>Compatibility <a class="header-anchor" href="#compatibility" aria-label="Permalink to &quot;&lt;a id=&quot;section7&quot;&gt;&lt;/a&gt;Compatibility&quot;">​</a></h2><p><code>CREATE MATERIALIZED VIEW</code> is a WarehousePG extension of the SQL standard.</p><h2 id="see-also" tabindex="-1"><a id="section8"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;section8&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./SELECT.html">SELECT</a>, <a href="./VALUES.html">VALUES</a>, <a href="./CREATE_VIEW.html">CREATE VIEW</a>, <a href="./ALTER_MATERIALIZED_VIEW.html">ALTER MATERIALIZED VIEW</a>, <a href="./DROP_MATERIALIZED_VIEW.html">DROP MATERIALIZED VIEW</a>, <a href="./REFRESH_MATERIALIZED_VIEW.html">REFRESH MATERIALIZED VIEW</a></p><p><strong>Parent topic:</strong> <a href="./../sql_commands/sql_ref.html">SQL Commands</a></p>`,31)]))}const m=a(o,[["render",n]]);export{h as __pageData,m as default};

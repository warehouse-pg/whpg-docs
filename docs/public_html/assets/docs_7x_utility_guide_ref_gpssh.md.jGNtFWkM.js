import{_ as s,c as t,o,ag as a}from"./chunks/framework.Ds6Eueu6.js";const u=JSON.parse('{"title":"gpssh","description":"","frontmatter":{},"headers":[],"relativePath":"docs/7x/utility_guide/ref/gpssh.md","filePath":"docs/7x/utility_guide/ref/gpssh.md"}'),n={name:"docs/7x/utility_guide/ref/gpssh.md"};function i(c,e,d,p,h,l){return o(),t("div",null,e[0]||(e[0]=[a(`<h1 id="gpssh" tabindex="-1">gpssh <a class="header-anchor" href="#gpssh" aria-label="Permalink to &quot;gpssh&quot;">​</a></h1><p>Provides SSH access to multiple hosts at once.</p><h2 id="synopsis" tabindex="-1"><a id="section2"></a>Synopsis <a class="header-anchor" href="#synopsis" aria-label="Permalink to &quot;&lt;a id=&quot;section2&quot;&gt;&lt;/a&gt;Synopsis&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpssh { -f &lt;hostfile_gpssh&gt; | - h &lt;hostname&gt; [-h &lt;hostname&gt; ...] } \\[-s\\] [-e]</span></span>
<span class="line"><span>      [-d &lt;seconds&gt;] [-t &lt;multiplier&gt;] [-v]</span></span>
<span class="line"><span>      [&lt;bash_command&gt;]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>gpssh -? </span></span>
<span class="line"><span></span></span>
<span class="line"><span>gpssh --version</span></span></code></pre></div><h2 id="description" tabindex="-1"><a id="section3"></a>Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;&lt;a id=&quot;section3&quot;&gt;&lt;/a&gt;Description&quot;">​</a></h2><p>The <code>gpssh</code> utility allows you to run bash shell commands on multiple hosts at once using SSH (secure shell). You can run a single command by specifying it on the command-line, or omit the command to enter into an interactive command-line session.</p><p>To specify the hosts involved in the SSH session, use the <code>-f</code> option to specify a file containing a list of host names, or use the <code>-h</code> option to name single host names on the command-line. At least one host name (<code>-h</code>) or a host file (<code>-f</code>) is required. Note that the current host is <em><strong>not</strong></em> included in the session by default — to include the local host, you must explicitly declare it in the list of hosts involved in the session.</p><p>Before using <code>gpssh</code>, you must have a trusted host setup between the hosts involved in the SSH session. You can use the utility <code>gpssh-exkeys</code> to update the known host files and exchange public keys between hosts if you have not done so already.</p><p>If you do not specify a command on the command-line, <code>gpssh</code> will go into interactive mode. At the <code>gpssh</code> command prompt (<code>=&gt;</code>), you can enter a command as you would in a regular bash terminal command-line, and the command will be run on all hosts involved in the session. To end an interactive session, press <code>CTRL</code>+<code>D</code> on the keyboard or type <code>exit</code> or <code>quit</code>.</p><p>If a user name is not specified in the host file, <code>gpssh</code> will run commands as the currently logged in user. To determine the currently logged in user, do a <code>whoami</code> command. By default, <code>gpssh</code> goes to <code>$HOME</code> of the session user on the remote hosts after login. To ensure commands are run correctly on all remote hosts, you should always enter absolute paths.</p><p>If you encounter network timeout problems when using <code>gpssh</code>, you can use <code>-d</code> and <code>-t</code> options or set parameters in the <code>gpssh.conf</code> file to control the timing that <code>gpssh</code> uses when validating the initial <code>ssh</code> connection. For information about the configuration file, see <a href="#section6">gpssh Configuration File</a>.</p><h2 id="options" tabindex="-1"><a id="section4"></a>Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;&lt;a id=&quot;section4&quot;&gt;&lt;/a&gt;Options&quot;">​</a></h2><p>bash_command : A bash shell command to run on all hosts involved in this session (optionally enclosed in quotes). If not specified, <code>gpssh</code> starts an interactive session.</p><p>-d (delay) seconds : Optional. Specifies the time, in seconds, to wait at the start of a <code>gpssh</code> interaction with <code>ssh</code>. Default is <code>0.05</code>. This option overrides the <code>delaybeforesend</code> value that is specified in the <code>gpssh.conf</code> configuration file.</p><p>: Increasing this value can cause a long wait time during <code>gpssh</code> startup.</p><p>-e (echo) : Optional. Echoes the commands passed to each host and their resulting output while running in non-interactive mode.</p><p>-f hostfile_gpssh : Specifies the name of a file that contains a list of hosts that will participate in this SSH session. The syntax of the host file is one host per line.</p><p>-h hostname : Specifies a single host name that will participate in this SSH session. You can use the <code>-h</code> option multiple times to specify multiple host names.</p><p>-s : Optional. If specified, before running any commands on the target host, <code>gpssh</code> sources the file <code>greenplum_path.sh</code> in the directory specified by the <code>$GPHOME</code> environment variable.</p><p>: This option is valid for both interactive mode and single command mode.</p><p>-t multiplier : Optional. A decimal number greater than 0 (zero) that is the multiplier for the timeout that <code>gpssh</code> uses when validating the <code>ssh</code> prompt. Default is <code>1</code>. This option overrides the <code>prompt_validation_timeout</code> value that is specified in the <code>gpssh.conf</code> configuration file.</p><p>: Increasing this value has a small impact during <code>gpssh</code> startup.</p><p>-v (verbose mode) : Optional. Reports additional messages in addition to the command output when running in non-interactive mode.</p><p>--version : Displays the version of this utility.</p><p>-? (help) : Displays the online help.</p><h2 id="gpssh-configuration-file" tabindex="-1"><a id="section6"></a>gpssh Configuration File <a class="header-anchor" href="#gpssh-configuration-file" aria-label="Permalink to &quot;&lt;a id=&quot;section6&quot;&gt;&lt;/a&gt;gpssh Configuration File&quot;">​</a></h2><p>The <code>gpssh.conf</code> file contains parameters that let you adjust the timing that <code>gpssh</code> uses when validating the initial <code>ssh</code> connection. These parameters affect the network connection before the <code>gpssh</code> session runs commands with <code>ssh</code>. The location of the file is specified by the environment variable <code>COORDINATOR_DATA_DIRECTORY</code>. If the environment variable is not defined or the <code>gpssh.conf</code> file does not exist, <code>gpssh</code> uses the default values or the values set with the <code>-d</code> and <code>-t</code> options. For information about the environment variable, see the <em>WarehousePG Reference Guide</em>.</p><p>The <code>gpssh.conf</code> file is a text file that consists of a <code>[gpssh]</code> section and parameters. On a line, the <code>#</code> (pound sign) indicates the start of a comment. This is an example <code>gpssh.conf</code> file.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[gpssh]</span></span>
<span class="line"><span>delaybeforesend = 0.05</span></span>
<span class="line"><span>prompt_validation_timeout = 1.0</span></span>
<span class="line"><span>sync_retries = 5</span></span></code></pre></div><p>These are the <code>gpssh.conf</code> parameters.</p><p>delaybeforesend = seconds : Specifies the time, in seconds, to wait at the start of a <code>gpssh</code> interaction with <code>ssh</code>. Default is 0.05. Increasing this value can cause a long wait time during <code>gpssh</code> startup. The <code>-d</code> option overrides this parameter.</p><p>prompt_validation_timeout = multiplier : A decimal number greater than 0 (zero) that is the multiplier for the timeout that <code>gpssh</code> uses when validating the <code>ssh</code> prompt. Increasing this value has a small impact during <code>gpssh</code> startup. Default is <code>1</code>. The <code>-t</code> option overrides this parameter.</p><p>sync_retries = attempts : A non-negative integer that specifies the maximum number of times that <code>gpssh</code> attempts to connect to a remote WarehousePG host. The default is 3. If the value is 0, <code>gpssh</code> returns an error if the initial connection attempt fails. Increasing the number of attempts also increases the time between retry attempts. This parameter cannot be configured with a command-line option.</p><p>: The <code>-t</code> option also affects the time between retry attempts.</p><p>: Increasing this value can compensate for slow network performance or segment host performance issues such as heavy CPU or I/O load. However, when a connection cannot be established, an increased value also increases the delay when an error is returned.</p><h2 id="examples" tabindex="-1"><a id="section5"></a>Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;&lt;a id=&quot;section5&quot;&gt;&lt;/a&gt;Examples&quot;">​</a></h2><p>Start an interactive group SSH session with all hosts listed in the file <code>hostfile_gpssh</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ gpssh -f hostfile_gpssh</span></span></code></pre></div><p>At the <code>gpssh</code> interactive command prompt, run a shell command on all the hosts involved in this session.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=&gt; ls -a /data/primary/*</span></span></code></pre></div><p>Exit an interactive session:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>=&gt; exit</span></span>
<span class="line"><span>=&gt; quit</span></span></code></pre></div><p>Start a non-interactive group SSH session with the hosts named <code>sdw1</code> and <code>sdw2</code> and pass a file containing several commands named <code>command_file</code> to <code>gpssh</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ gpssh -h sdw1 -h sdw2 -v -e &lt; command_file</span></span></code></pre></div><p>Run single commands in non-interactive mode on hosts <code>sdw2</code> and <code>localhost</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ gpssh -h sdw2 -h localhost -v -e &#39;ls -a /data/primary/*&#39;</span></span>
<span class="line"><span>$ gpssh -h sdw2 -h localhost -v -e &#39;echo $GPHOME&#39;</span></span>
<span class="line"><span>$ gpssh -h sdw2 -h localhost -v -e &#39;ls -1 | wc -l&#39;</span></span></code></pre></div><h2 id="see-also" tabindex="-1"><a id="seealso"></a>See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;&lt;a id=&quot;seealso&quot;&gt;&lt;/a&gt;See Also&quot;">​</a></h2><p><a href="./gpssh-exkeys.html">gpssh-exkeys</a>, <a href="./gpsync.html">gpsync</a></p>`,48)]))}const m=s(n,[["render",i]]);export{u as __pageData,m as default};
